(this.webpackJsonpffm_web_frontend=this.webpackJsonpffm_web_frontend||[]).push([[0],{109:function(e,t,r){},146:function(e,t,r){},147:function(e,t,r){},170:function(e,t,r){},173:function(e,t,r){},199:function(e,t,r){"use strict";r.r(t);var n=r(2),c=r.n(n),a=r(51),s=r.n(a),i=(r(146),r(4)),l=(r(147),r(28)),o=r(25),j=r(6),d=r(5),b=r(7),h=c.a.createContext({environment:"live"}),u=h,x=r(3),O=r(1),f=r(16),g=r(8),p=r.n(g),m=(r(36),function(e){var t=Object(n.useState)(e.robot),r=Object(i.a)(t,2),c=r[0],a=(r[1],Object(n.useState)(e.dailyRisk)),s=Object(i.a)(a,2),l=s[0],o=s[1],j=Object(n.useState)(e.tradeLimit),d=Object(i.a)(j,2),b=d[0],h=d[1],u=Object(n.useState)(e.riskOnTrade),g=Object(i.a)(u,2),m=g[0],v=g[1],y=Object(n.useState)(e.pLevel),S=Object(i.a)(y,2),w=S[0],C=(S[1],Object(n.useState)(e.qType)),_=Object(i.a)(C,2),A=_[0],k=_[1],N=Object(n.useState)(e.quantity),E=Object(i.a)(N,2),z=E[0],D=E[1],L=Object(n.useState)(e.sl),T=Object(i.a)(L,2),M=T[0],I=T[1],F=Object(n.useState)(e.winExp),B=Object(i.a)(F,2),P=B[0],R=B[1];return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{style:{verticalAlign:"middle"},children:c}),Object(O.jsx)("td",{style:{verticalAlign:"middle"},children:Object(O.jsx)(x.a.Control,{onChange:function(e){o(e.target.value)},type:"number",placeholder:l})}),Object(O.jsx)("td",{style:{verticalAlign:"middle"},children:Object(O.jsx)(x.a.Control,{onChange:function(e){h(e.target.value)},type:"number",placeholder:b})}),Object(O.jsx)("td",{style:{verticalAlign:"middle"},children:Object(O.jsx)(x.a.Control,{onChange:function(e){v(e.target.value)},type:"number",placeholder:m})}),Object(O.jsx)("td",{style:{verticalAlign:"middle"},children:Object(O.jsxs)(x.a.Control,{onChange:function(e){k(e.target.value)},defaultValue:A,as:"select",children:[Object(O.jsx)("option",{value:"Stop Based",children:"Stop Based"}),Object(O.jsx)("option",{value:"Fix",children:"Fix"})]})}),Object(O.jsx)("td",{style:{verticalAlign:"middle"},children:Object(O.jsx)(x.a.Control,{onChange:function(e){D(e.target.value)},type:"number",placeholder:z})}),Object(O.jsx)("td",{style:{verticalAlign:"middle"},children:Object(O.jsx)(x.a.Control,{onChange:function(e){I(e.target.value)},type:"number",placeholder:M})}),Object(O.jsx)("td",{style:{verticalAlign:"middle"},children:Object(O.jsx)(x.a.Control,{onChange:function(e){R(e.target.value)},type:"number",placeholder:P})}),Object(O.jsx)("td",{style:{verticalAlign:"middle"},children:Object(O.jsx)(f.a,{onClick:function(){p.a.post(e.server+"risk/update_robot_risk/",{robot:c,daily_risk:l,nbm_trades:b,risk_per_trade:m,pyramiding_level:w,quantity_type:A,quantity:z,sl:M,win_exp:P}).then((function(e){return alert("Risk is updated for "+c)})).catch((function(e){console.error("Error Message:",e)}))},children:"Update"})})]})}),v=r(23),y=function(e){var t=Object(n.useContext)(u).environment,r=Object(n.useState)([]),c=Object(i.a)(r,2),a=c[0],s=c[1];Object(n.useEffect)((function(){fetch(e.server+"risk/get_robot_risk/"+t).then((function(e){return e.json()})).then((function(e){return s(e)})).catch((function(e){console.error("Error Message:",e)}))}),[e]),console.log(a);var l=a.map((function(t){return Object(O.jsx)(m,{robot:t.robot,dailyRisk:t.daily_risk,tradeLimit:t.daily_trade_limit,riskOnTrade:t.risk_per_trade,pLevel:t.pyramiding_level,qType:t.quantity_type,quantity:t.quantity,sl:t.sl,winExp:t.win_exp,server:e.server},t.id)}));return Object(O.jsxs)(v.a,{children:[Object(O.jsx)("thead",{style:{fontSize:12},children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{style:{verticalAlign:"middle"},children:"Robot"}),Object(O.jsx)("th",{style:{verticalAlign:"middle"},children:"Daily Loss Limit %"}),Object(O.jsx)("th",{style:{verticalAlign:"middle"},children:"Max Number of Trades (Daily)"}),Object(O.jsx)("th",{style:{verticalAlign:"middle"},children:"Risk Exposure %"}),Object(O.jsx)("th",{style:{verticalAlign:"middle"},children:"Quantity Type"}),Object(O.jsx)("th",{style:{verticalAlign:"middle"},children:"Quantity"}),Object(O.jsx)("th",{style:{verticalAlign:"middle"},children:"SL"}),Object(O.jsx)("th",{style:{verticalAlign:"middle"},children:"Win Exp %"}),Object(O.jsx)("th",{})]})}),Object(O.jsx)("tbody",{children:l})]})},S=c.a.createContext(),w=function(){var e=Object(n.useContext)(S).server;return Object(O.jsx)(o.a,{className:"border",style:{background:"#FBFAFA",width:"100%",height:window.innerHeight,padding:"20px"},fluid:!0,children:Object(O.jsx)(j.a,{children:Object(O.jsx)(d.a,{children:Object(O.jsx)(o.a,{children:Object(O.jsxs)(b.a,{className:"card",children:[Object(O.jsx)(b.a.Title,{className:"card-header-first",children:" Robot Risk Parameters"}),Object(O.jsx)(y,{server:e})]})})})})})},C=r(24),_=(r(170),function(e){var t=Object(n.useState)([]),r=Object(i.a)(t,2),c=r[0],a=r[1];Object(n.useEffect)((function(){p.a.get(e.server+"home/load_robot_stats/"+e.env).then((function(e){return e.data})).then((function(e){return a(e)})).catch((function(e){console.error("Error Message:",e)}))}),[e]);var s=c.map((function(e){return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{style:{fontSize:14,verticalAlign:"middle"},className:"table-row-robot-name",children:e.robot.name}),Object(O.jsx)("td",{style:{fontSize:14,verticalAlign:"middle",color:e.balance<0?"red":"green"},className:"table-row-other",children:e.balance}),Object(O.jsxs)("td",{style:{fontSize:14,verticalAlign:"middle",color:e.dtd_ret<0?"red":"green"},className:"table-row-other",children:[e.dtd_ret," %"]}),Object(O.jsxs)("td",{style:{fontSize:14,verticalAlign:"middle",color:e.mtd_ret<0?"red":"green"},className:"table-row-other",children:[e.mtd_ret," %"]}),Object(O.jsxs)("td",{style:{fontSize:14,verticalAlign:"middle",color:e.ytd_ret<0?"red":"green"},className:"table-row-other",children:[e.ytd_ret," %"]})]},e.robot.id)}));return Object(O.jsx)(j.a,{style:{height:"450px",width:"100%",margin:"15px"},children:Object(O.jsx)(b.a,{className:"card",style:{margin:"0px"},children:Object(O.jsx)("div",{style:{height:"500px",overflowY:"scroll",overflowX:"hidden"},children:Object(O.jsxs)(v.a,{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{style:{fontSize:14,verticalAlign:"middle"},className:"table-row-robot-name",children:"Robot"}),Object(O.jsx)("th",{style:{fontSize:14,verticalAlign:"middle"},children:"Balance"}),Object(O.jsx)("th",{style:{fontSize:14,verticalAlign:"middle"},children:"DTD"}),Object(O.jsx)("th",{style:{fontSize:14,verticalAlign:"middle"},children:"MTD"}),Object(O.jsx)("th",{style:{fontSize:14,verticalAlign:"middle"},children:"YTD"})]})}),Object(O.jsx)("tbody",{children:s})]})})})})}),A=r(22),k=r.n(A),N=c.a.createContext(),E=r(15),z=function(e){var t=Object(n.useState)(""),r=Object(i.a)(t,2),c=r[0],a=r[1];return Object(n.useEffect)((function(){p.a.get(e.url,{params:e.params}).then((function(t){return t.data.map((function(t){return Object(O.jsx)("option",{value:t[e.code],children:t[e.value]},t.id)}))})).then((function(e){return a(e)})).catch((function(e){console.error("Error Message:",e)}))}),[e]),c},D=function(e){var t={options:{chart:{toolbar:!1,id:"basic-bar"},colors:[function(e){return e.value<0?"#E32227":"#007500"}],xaxis:{categories:[],labels:{show:!1}},yaxis:[{labels:{formatter:function(e){return e.toFixed(0)}},title:{text:"Profit"}}],dataLabels:{enabled:!1}},series:[{name:"series-1",data:e.data}]};return Object(O.jsxs)(b.a,{className:"card",style:{margin:"2px",height:"100%"},children:[Object(O.jsx)(b.a.Title,{className:"card-header-first",children:e.title}),Object(O.jsx)(b.a.Body,{style:{padding:"0px"},children:Object(O.jsx)(k.a,{options:t.options,series:t.series,type:"bar",width:"100%",height:"100%"})})]})},L=function(e){var t,r=Object(n.useState)([]),c=Object(i.a)(r,2),a=c[0],s=c[1];return Object(n.useEffect)((function(){p.a.get(e.server+"home/daily_robot_balances",{params:{env:e.env}}).then((function(e){return s(e.data.map((function(e){return e.y})))})).catch((function(e){console.error("Error Message:",e)}))}),[e]),Object(O.jsxs)(j.a,{style:{height:"600px",width:"100%",margin:"0px",padding:"0px"},children:[Object(O.jsx)(d.a,{style:{height:"100%",width:"50%"},children:Object(O.jsx)(D,{data:(t=a,t.reduce((function(e,t){var r=e.sum,n=e.res;return r+=t,n.push(r),{sum:r,res:n}}),{sum:0,res:[]}).res),title:"Total Cumulative Year to Date P&L"})}),Object(O.jsx)(d.a,{style:{height:"100%",width:"50%"},children:Object(O.jsx)(D,{data:a,title:"Daily P&L"})})]})},T=function(e){return Object(O.jsxs)(b.a,{className:"card",style:{margin:"0px"},children:[Object(O.jsx)(b.a.Title,{style:{margin:"0px"},className:"card-header-first",children:e.title}),Object(O.jsx)(b.a.Body,{style:{display:"flex",justifyContent:"center",padding:"5px"},children:e.children})]})},M=function(e){var t=(new Date).toISOString().substr(0,10),r=Object(n.useState)(0),c=Object(i.a)(r,2),a=c[0],s=c[1],l=Object(n.useState)(0),o=Object(i.a)(l,2),b=o[0],h=o[1],u=Object(n.useState)(0),x=Object(i.a)(u,2),f=x[0],g=x[1];return Object(n.useEffect)((function(){p.a.get(e.server+"home/total_robot_pnl/",{params:{start_date:t,env:e.env}}).then((function(e){return s(e.data[0].data)})).catch((function(e){console.error("Error Message:",e)}))}),[e]),Object(n.useEffect)((function(){p.a.get(e.server+"home/total_robot_pnl/",{params:{start_date:t.substr(0,7)+"-01",env:e.env}}).then((function(e){return h(e.data[0].data)})).catch((function(e){console.error("Error Message:",e)}))}),[e]),Object(n.useEffect)((function(){p.a.get(e.server+"home/total_robot_pnl/",{params:{start_date:t.substr(0,4)+"-01-01",env:e.env}}).then((function(e){return g(e.data[0].data)})).catch((function(e){console.error("Error Message:",e)}))}),[e]),Object(O.jsxs)(j.a,{style:{height:"150px",width:"100%",margin:"0px",padding:"10px"},children:[Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsx)(T,{title:"DTD",children:Object(O.jsx)("h1",{style:{margin:"auto",verticalAlign:"middle",color:a<0?"red":"green"},children:a})})}),Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsx)(T,{title:"MTD",children:Object(O.jsx)("h1",{style:{margin:"auto",verticalAlign:"middle",color:b<0?"red":"green"},children:b})})}),Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsx)(T,{title:"YTD",children:Object(O.jsx)("h1",{style:{margin:"auto",verticalAlign:"middle",color:f<0?"red":"green"},children:f})})})]})},I=function(e){var t={options:{labels:e.labels,dataLabels:{enabled:!0,formatter:function(e){return Math.round(100*e)/100+"%"}}},series:e.data};return Object(O.jsxs)(b.a,{className:"card",style:{margin:"0px"},children:[Object(O.jsx)(b.a.Title,{className:"card-header-first",children:e.title}),Object(O.jsx)(b.a.Body,{style:{padding:"0px"},children:Object(O.jsx)(j.a,{style:{height:"100%"},children:Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsx)(k.a,{options:t.options,series:t.series,type:"donut",width:"100%",height:"100%"})})})})]})},F=function(e){var t=Object(n.useState)([]),r=Object(i.a)(t,2),c=r[0],a=r[1],s=Object(n.useState)([]),l=Object(i.a)(s,2),o=l[0],b=l[1],h=c.reduce((function(e,t){return e+t}),0);return Object(n.useEffect)((function(){p.a.get(e.server+"home/total_robot_balances_by_date/",{params:{env:e.env}}).then((function(e){a(e.data.map((function(e){return e.y}))),b(e.data.map((function(e){return e.x})))})).catch((function(e){console.error("Error Message:",e)}))}),[e]),Object(O.jsxs)(j.a,{style:{height:"300px",width:"100%",margin:"0px",padding:"0px"},children:[Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsx)(T,{title:"Total Balance",children:Object(O.jsx)("h1",{style:{margin:"auto",verticalAlign:"middle"},children:Math.round(100*h)/100})})}),Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsx)(I,{title:"Balance by Robots",data:c,labels:o})})]})},B=r(54),P=function(e){Math.max.apply(Math,Object(B.a)(e.data));console.log(e.data);var t={options:{plotOptions:{bar:{horizontal:e.horizontal}},xaxis:{categories:[],labels:{show:!1}},yaxis:[{tickAmount:10,labels:{show:!0,style:{colors:[],fontSize:"12px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:400,cssClass:"apexcharts-yaxis-label"}}}],dataLabels:{enabled:!0}},series:[{name:"Aggregated Robot Profit and Loss",data:e.data}]};return Object(O.jsxs)(b.a,{className:"card",style:{margin:"0px"},children:[Object(O.jsx)(b.a.Title,{className:"card-header-first",children:e.title}),Object(O.jsx)(b.a.Body,{style:{padding:"0px"},children:Object(O.jsx)(j.a,{style:{height:"100%"},children:Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsx)(k.a,{options:t.options,series:t.series,type:"bar",width:"100%",height:"100%"})})})})]})},R=function(e){var t=(new Date).toISOString().substr(0,10),r=Object(n.useState)([]),c=Object(i.a)(r,2),a=c[0],s=c[1],l=Object(n.useState)([]),o=Object(i.a)(l,2),b=o[0],h=o[1],u=Object(n.useState)([]),x=Object(i.a)(u,2),f=x[0],g=x[1];return Object(n.useEffect)((function(){p.a.get(e.server+"home/robot_pnl/",{params:{start_date:t,env:e.env}}).then((function(e){return s(e.data)})).catch((function(e){console.error("Error Message:",e)}))}),[e]),Object(n.useEffect)((function(){p.a.get(e.server+"home/robot_pnl/",{params:{start_date:t.substr(0,7)+"-01",env:e.env}}).then((function(e){return h(e.data)})).catch((function(e){console.error("Error Message:",e)}))}),[e]),Object(n.useEffect)((function(){p.a.get(e.server+"home/robot_pnl/",{params:{start_date:t.substr(0,4)+"-01-01",env:e.env}}).then((function(e){return g(e.data)})).catch((function(e){console.error("Error Message:",e)}))}),[e]),Object(O.jsxs)(j.a,{style:{height:"300px",width:"100%",margin:"0px",padding:"10px"},children:[Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsx)(P,{data:a,horizontal:!1,xLabel:!0})}),Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsx)(P,{data:b,horizontal:!1,xLabel:!0})}),Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsx)(P,{data:f,horizontal:!1,xLabel:!0})})]})},G=(r(172),r(173),function(e){var t=Object(n.useContext)(u).environment,r=Object(n.useContext)(S).server,c=(new Date).toISOString().substr(0,10),a=Object(n.useState)(c),s=Object(i.a)(a,2);s[0],s[1];return Object(O.jsx)(o.a,{style:{background:"#FBFAFA",width:"100%",height:window.innerHeight},fluid:!0,children:Object(O.jsxs)(j.a,{style:{height:window.innerHeight},children:[Object(O.jsxs)(d.a,{style:{height:"1000px",width:"50%",margin:"15px"},children:[Object(O.jsx)("h4",{style:{textAlign:"left",marginTop:"0px",marginBottom:"15px"},children:"Balance"}),Object(O.jsx)(F,{server:r,env:t}),Object(O.jsx)("h4",{style:{textAlign:"left",marginTop:"15px"},children:"Total Robot Results"}),Object(O.jsx)(L,{server:r,env:t})]}),Object(O.jsxs)(d.a,{style:{height:"1000px",width:"50%",margin:"15px"},children:[Object(O.jsx)("h4",{children:"Profit"}),Object(O.jsx)(M,{server:r,env:t}),Object(O.jsx)(R,{server:r,env:t}),Object(O.jsx)("h4",{children:"Performance"}),Object(O.jsx)(_,Object(C.a)({server:r,env:t},"env",t))]})]})})}),H=r(27),q=function(e){var t=Object(n.useState)(""),r=Object(i.a)(t,2),c=r[0],a=r[1],s=Object(n.useState)(""),l=Object(i.a)(s,2),o=l[0],j=l[1],d=Object(n.useState)("Trade"),b=Object(i.a)(d,2),h=b[0],u=b[1],g=Object(n.useState)("USD"),m=Object(i.a)(g,2),v=m[0],y=m[1],S=function(){e.hide()};console.log(c,h,v);var w=function(t){t.preventDefault(),p.a.post(e.server+"portfolios/new/",{port_name:c,port_type:h,port_currency:v,port_code:o}).then((function(t){"New Portfolio is created!"==t.data?(alert("New portfolio is created!"),e.hide()):alert(t.data)})).catch((function(e){console.error("Error Message:",e)}))};return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(E.a,{show:e.show,onHide:S,children:[Object(O.jsx)(E.a.Header,{closeButton:!0,children:Object(O.jsx)(E.a.Title,{children:"New Portfolio"})}),Object(O.jsx)(E.a.Body,{children:Object(O.jsxs)(x.a,{onSubmit:w,style:{width:"100%"},children:[Object(O.jsxs)(x.a.Group,{children:[Object(O.jsx)(x.a.Label,{children:"Portfolio Name"}),Object(O.jsx)(x.a.Control,{onChange:function(e){a(e.target.value)},type:"text",placeholder:"Portfolio Name",required:!0})]}),Object(O.jsxs)(x.a.Group,{children:[Object(O.jsx)(x.a.Label,{children:"Portfolio Code"}),Object(O.jsx)(x.a.Control,{onChange:function(e){j(e.target.value)},type:"text",placeholder:"Portfolio Code",required:!0})]}),Object(O.jsxs)(x.a.Group,{children:[Object(O.jsx)(x.a.Label,{children:"Portfolio Type"}),Object(O.jsxs)(x.a.Control,{onChange:function(e){u(e.target.value)},as:"select",children:[Object(O.jsx)("option",{value:"Trade",children:"Trade"}),Object(O.jsx)("option",{value:"Savings",children:"Savings"}),Object(O.jsx)("option",{value:"Investment",children:"Investment"})]})]}),Object(O.jsxs)(x.a.Group,{children:[Object(O.jsx)(x.a.Label,{children:"Portfolio Currency"}),Object(O.jsxs)(x.a.Control,{onChange:function(e){y(e.target.value)},as:"select",children:[Object(O.jsx)("option",{value:"USD",children:"USD"}),Object(O.jsx)("option",{value:"HUF",children:"HUF"}),Object(O.jsx)("option",{value:"EUR",children:"EUR"})]})]})]})}),Object(O.jsxs)(E.a.Footer,{children:[Object(O.jsx)(f.a,{variant:"secondary",onClick:S,children:"Close"}),Object(O.jsx)(f.a,{variant:"primary",onClick:w,children:"Save"})]})]})})},Y=r(17),V=(r(128),r(222)),U=r(70),W=r.n(U),X=r(71),Q=r.n(X),J=r(218),K=function(e){var t=new Date,r=new Date(t.getFullYear(),t.getMonth(),1),c=Object(n.useState)(r.toISOString().substr(0,10)),a=Object(i.a)(c,2),s=a[0],l=a[1],o=Object(n.useState)(t.toISOString().substr(0,10)),b=Object(i.a)(o,2),h=b[0],u=b[1],g=Object(n.useState)([]),m=Object(i.a)(g,2),v=m[0],y=m[1],S=Object(n.useState)(e.portfolio),w=Object(i.a)(S,2),C=w[0],_=w[1],A=v.map((function(e,t){return Object(O.jsx)(J.a,{nodeId:t.toString(),label:e.portfolio,children:e.response.map((function(e,r){return Object(O.jsx)(J.a,{nodeId:t.toString()+r.toString(),label:e.date,children:e.msgs.map((function(e){return Object(O.jsx)(J.a,{label:e.msg})}))})}))})})),k=function(t){t.target.checked?_("ALL"):_(e.portfolio)},N=function(t){t.preventDefault(),p.a.post(e.server+"portfolios/positions/",{portfolio:C,start_date:s,end_date:h}).then((function(e){return y(e.data)})).catch((function(e){console.error("Error Message:",e)}))};return Object(O.jsxs)(E.a,{show:e.show,onHide:function(){e.hide()},size:"xl",children:[Object(O.jsx)(E.a.Header,{closeButton:!0,children:Object(O.jsxs)(E.a.Title,{children:["Portfolio Position Calculation - ",C]})}),Object(O.jsx)(E.a.Body,{style:{height:"300px"},children:Object(O.jsxs)(j.a,{style:{height:"100%"},children:[Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsx)(x.a,{onSubmit:N,style:{width:"100%",height:"100%"},children:Object(O.jsxs)(j.a,{style:{height:"60px",width:"100%",padding:"5px",margin:"5px"},children:[Object(O.jsx)(j.a,{style:{width:"100%",margin:"0px"},children:Object(O.jsxs)(x.a.Group,{style:{width:"100%",margin:"0px"},children:[Object(O.jsx)(x.a.Label,{className:"form-label-first",column:!0,sm:2,children:"From"}),Object(O.jsx)(d.a,{sm:10,children:Object(O.jsx)(x.a.Control,{type:"date",onChange:function(e){l(e.target.value)},defaultValue:r.toISOString().substr(0,10)})})]})}),Object(O.jsx)(j.a,{style:{width:"100%",margin:"0px"},children:Object(O.jsxs)(x.a.Group,{style:{width:"100%"},children:[Object(O.jsx)(x.a.Label,{className:"form-label-first",column:!0,sm:2,children:"To"}),Object(O.jsx)(d.a,{sm:10,children:Object(O.jsx)(x.a.Control,{type:"date",onChange:function(e){u(e.target.value)},defaultValue:t.toISOString().substr(0,10)})})]})})]})})}),Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsx)(V.a,{"aria-label":"file system navigator",defaultCollapseIcon:Object(O.jsx)(W.a,{}),defaultExpandIcon:Object(O.jsx)(Q.a,{}),sx:{height:"100%",flexGrow:1,maxWidth:"100%",overflowY:"auto"},children:A})})]})}),Object(O.jsx)(E.a.Footer,{style:{width:"100%",margin:"0px"},children:Object(O.jsxs)(j.a,{style:{width:"100%",margin:"0px"},children:[Object(O.jsx)(d.a,{children:Object(O.jsxs)(j.a,{children:[Object(O.jsx)(d.a,{children:Object(O.jsx)(x.a.Group,{className:"mb-3",controlId:"formBasicCheckbox",children:Object(O.jsx)(x.a.Check,{onClick:k,type:"checkbox",label:"All Portfolios"})})}),Object(O.jsx)(d.a,{children:Object(O.jsx)(x.a.Group,{className:"mb-3",controlId:"formBasicCheckbox",children:Object(O.jsx)(x.a.Check,{onClick:k,type:"checkbox",label:"Since Inception"})})})]})}),Object(O.jsx)(d.a,{children:Object(O.jsx)(x.a.Group,{style:{width:"100%"},children:Object(O.jsx)(d.a,{sm:10,children:Object(O.jsx)(f.a,{variant:"primary",onClick:N,style:{width:"100%"},children:"Calculate"})})})})]})})]})},Z=function(e){var t=new Date,r=new Date(t.getFullYear(),t.getMonth(),1),c=Object(n.useState)(r.toISOString().substr(0,10)),a=Object(i.a)(c,2),s=a[0],l=a[1],o=Object(n.useState)(t.toISOString().substr(0,10)),b=Object(i.a)(o,2),h=b[0],u=b[1],g=Object(n.useState)([]),m=Object(i.a)(g,2),v=m[0],y=m[1],S=Object(n.useState)(e.portfolio),w=Object(i.a)(S,2),C=w[0],_=w[1],A=v.map((function(e,t){var r=e.response.map((function(e){return Object(O.jsx)(J.a,{label:e.date+" "+e.msg})}));return Object(O.jsx)(J.a,{nodeId:t.toString(),label:e.portfolio,children:r})})),k=function(t){t.preventDefault(),p.a.post(e.server+"portfolios/cash_holding/",{portfolio:C,start_date:s,end_date:h}).then((function(e){return y(e.data)})).catch((function(e){console.error("Error Message:",e)}))};return Object(O.jsxs)(E.a,{show:e.show,onHide:function(){e.hide()},size:"xl",children:[Object(O.jsx)(E.a.Header,{closeButton:!0,children:Object(O.jsxs)(E.a.Title,{children:["Cash Holding Calculation - ",C]})}),Object(O.jsx)(E.a.Body,{style:{width:"100%",height:"300px"},children:Object(O.jsxs)(j.a,{style:{height:"100%"},children:[Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsx)(x.a,{onSubmit:k,style:{width:"100%",height:"100%"},children:Object(O.jsxs)(j.a,{style:{height:"60px",width:"100%",padding:"5px",margin:"5px"},children:[Object(O.jsx)(j.a,{style:{width:"100%",margin:"0px"},children:Object(O.jsxs)(x.a.Group,{style:{width:"100%",margin:"0px"},children:[Object(O.jsx)(x.a.Label,{className:"form-label-first",column:!0,sm:2,children:"From"}),Object(O.jsx)(d.a,{sm:10,children:Object(O.jsx)(x.a.Control,{type:"date",onChange:function(e){l(e.target.value)},defaultValue:r.toISOString().substr(0,10)})})]})}),Object(O.jsx)(j.a,{style:{width:"100%",margin:"0px"},children:Object(O.jsxs)(x.a.Group,{style:{width:"100%"},children:[Object(O.jsx)(x.a.Label,{className:"form-label-first",column:!0,sm:2,children:"To"}),Object(O.jsx)(d.a,{sm:10,children:Object(O.jsx)(x.a.Control,{type:"date",onChange:function(e){u(e.target.value)},defaultValue:t.toISOString().substr(0,10)})})]})})]})})}),Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsx)(V.a,{"aria-label":"file system navigator",defaultCollapseIcon:Object(O.jsx)(W.a,{}),defaultExpandIcon:Object(O.jsx)(Q.a,{}),sx:{height:"100%",flexGrow:1,maxWidth:"100%",overflowY:"auto"},children:A})})]})}),Object(O.jsx)(E.a.Footer,{style:{width:"100%",margin:"0px"},children:Object(O.jsxs)(j.a,{style:{width:"100%",margin:"0px"},children:[Object(O.jsx)(d.a,{children:Object(O.jsx)(x.a.Group,{className:"mb-3",controlId:"formBasicCheckbox",children:Object(O.jsx)(x.a.Check,{onClick:function(t){t.target.checked?_("ALL"):_(e.portfolio),console.log(t.target.checked)},type:"checkbox",label:"All Portfolios"})})}),Object(O.jsx)(d.a,{children:Object(O.jsx)(x.a.Group,{style:{width:"100%"},children:Object(O.jsx)(d.a,{sm:10,children:Object(O.jsx)(f.a,{variant:"primary",onClick:k,style:{width:"100%"},children:"Calculate"})})})})]})})]})},$=(r(109),function(e){var t=Object(n.useState)(0),r=Object(i.a)(t,2),c=r[0],a=r[1],s=Object(n.useState)(),l=Object(i.a)(s,2),o=l[0],j=l[1];return Object(n.useEffect)((function(){p.a.get(e.server+"robots/get_last_price/",{params:{robot:e.robot}}).then((function(t){a(t.data.price),j(t.data.date),e.getPrice(c)})).catch((function(e){console.error("Error Message:",e)}))}),[e]),Object(O.jsxs)(x.a.Group,{children:[Object(O.jsxs)(x.a.Label,{children:["Price - ",o]}),Object(O.jsx)("h2",{children:Math.round(100*c)/100})]})}),ee=function(e){var t=Object(n.useState)(""),r=Object(i.a)(t,2),c=r[0],a=r[1],s=Object(n.useState)(""),l=Object(i.a)(s,2),o=l[0],b=l[1],h=Object(n.useState)(0),u=Object(i.a)(h,2),g=u[0],m=u[1],v=Object(n.useState)(0),y=Object(i.a)(v,2),S=y[0],w=y[1],C=Object(n.useState)(0),_=Object(i.a)(C,2),A=_[0],k=_[1],N={env:e.env},D=function(){e.hide()},L=function(t){t.preventDefault(),0===A?alert("Quantity can not be 0 !"):(p.a.post(e.server+"portfolios/portfolio_trade/",{portfolio:e.portfolio,unit:A,price:S,sec:o,sec_type:"Robot",sec_id:c}).then((function(e){return alert(e.data)})).catch((function(e){console.error("Error Message:",e)})),e.hide())};return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(E.a,{show:e.show,onHide:D,children:[Object(O.jsx)(E.a.Header,{closeButton:!0,children:Object(O.jsx)(E.a.Title,{children:"Buy Robot"})}),Object(O.jsx)(E.a.Body,{children:Object(O.jsxs)(x.a,{onSubmit:L,style:{width:"100%"},children:[Object(O.jsxs)(j.a,{children:[Object(O.jsx)(d.a,{children:Object(O.jsxs)(x.a.Group,{children:[Object(O.jsx)(x.a.Label,{children:"Portfolio"}),Object(O.jsx)(x.a.Control,{type:"text",placeholder:e.portfolio,value:e.portfolio,readOnly:!0})]})}),Object(O.jsx)(d.a,{children:Object(O.jsxs)(x.a.Group,{children:[Object(O.jsx)(x.a.Label,{children:"Available Cash (USD)"}),Object(O.jsx)(x.a.Control,{type:"text",placeholder:"2000",value:"2000",readOnly:!0})]})})]}),Object(O.jsxs)(j.a,{children:[Object(O.jsx)(d.a,{children:Object(O.jsxs)(x.a.Group,{children:[Object(O.jsx)(x.a.Label,{children:"Robot"}),Object(O.jsxs)(x.a.Control,{onChange:function(e){var t=e.nativeEvent.target.selectedIndex;a(e.target.value),b(e.nativeEvent.target[t].text),document.getElementById("unitInput").value=0,k(0),m(0)},as:"select",children:[Object(O.jsx)("option",{}),Object(O.jsx)(z,{url:e.server+"robots/get_robots_with_instrument/",params:N,code:1,value:2})]})]})}),Object(O.jsx)(d.a,{children:Object(O.jsx)($,{server:e.server,robot:o,getPrice:function(e){w(e),k(g/S)}})})]}),Object(O.jsxs)(j.a,{children:[Object(O.jsx)(d.a,{children:Object(O.jsxs)(x.a.Group,{children:[Object(O.jsx)(x.a.Label,{children:"Unit to invest"}),Object(O.jsx)(x.a.Control,{onChange:function(e){k(g/S),m(e.target.value)},type:"number",min:0,defaultValue:0,id:"unitInput"})]})}),Object(O.jsxs)(d.a,{children:[Object(O.jsx)(x.a.Label,{children:"Portfolio Quantity"}),Object(O.jsx)("h2",{children:Math.round(100*A)/100})]})]})]})}),Object(O.jsxs)(E.a.Footer,{children:[Object(O.jsx)(f.a,{variant:"secondary",onClick:D,children:"Close"}),Object(O.jsx)(f.a,{variant:"primary",onClick:L,children:"Save"})]})]})})},te=function(e){var t=function(){e.hide()},r=Object(n.useState)(0),c=Object(i.a)(r,2),a=c[0],s=c[1],l=Object(n.useState)("INFLOW"),o=Object(i.a)(l,2),j=o[0],d=o[1],b=Object(n.useState)("USD"),h=Object(i.a)(b,2),u=h[0],g=h[1],m=function(t){t.preventDefault(),console.log("form submited"),p.a.post(e.server+"portfolios/new_cash_flow/",{port_name:e.portfolio,amount:a,type:j,currency:u}).then((function(e){return alert(e.data)})).catch((function(e){console.error("Error Message:",e)})),g("USD")};return Object(O.jsxs)(E.a,{show:e.show,onHide:t,children:[Object(O.jsx)(E.a.Header,{closeButton:!0,children:Object(O.jsx)(E.a.Title,{children:"Funding"})}),Object(O.jsx)(E.a.Body,{children:Object(O.jsxs)(x.a,{onSubmit:m,style:{width:"100%"},children:[Object(O.jsxs)(x.a.Group,{children:[Object(O.jsx)(x.a.Label,{children:"Portfolio"}),Object(O.jsx)(x.a.Control,{type:"text",placeholder:e.portfolio,value:e.portfolio,readOnly:!0})]}),Object(O.jsxs)(x.a.Group,{children:[Object(O.jsx)(x.a.Label,{children:"Cash Flow"}),Object(O.jsx)(x.a.Control,{onChange:function(e){s(e.target.value)},type:"number",placeholder:"Value"})]}),Object(O.jsxs)(x.a.Group,{children:[Object(O.jsx)(x.a.Label,{children:"Currency"}),Object(O.jsxs)(x.a.Control,{onChange:function(e){g(e.target.value)},as:"select",children:[Object(O.jsx)("option",{value:"USD",children:"USD"}),Object(O.jsx)("option",{value:"EUR",children:"EUR"})]})]}),Object(O.jsxs)(x.a.Group,{children:[Object(O.jsx)(x.a.Label,{children:"Type"}),Object(O.jsx)(x.a.Control,{onChange:function(e){d(e.target.value)},as:"select",children:Object(O.jsx)("option",{value:"INFLOW",children:"Inflow"})})]})]})}),Object(O.jsxs)(E.a.Footer,{children:[Object(O.jsx)(f.a,{variant:"secondary",onClick:t,children:"Close"}),Object(O.jsx)(f.a,{variant:"primary",onClick:m,children:"Save"})]})]})},re=function(e){var t=Object(n.useState)(""),r=Object(i.a)(t,2),c=r[0],a=r[1],s=Object(n.useState)(""),l=Object(i.a)(s,2),o=l[0],j=l[1],d=Object(n.useState)(""),b=Object(i.a)(d,2),h=b[0],u=b[1],g=Object(n.useState)("live"),m=Object(i.a)(g,2),v=m[0],y=m[1],S=Object(n.useState)("USD"),w=Object(i.a)(S,2),C=w[0],_=w[1],A=function(){e.hide()};return Object(O.jsxs)(E.a,{show:e.show,onHide:A,animation:!1,children:[Object(O.jsx)(E.a.Header,{closeButton:!0,children:Object(O.jsx)(E.a.Title,{children:"New Account"})}),Object(O.jsxs)(E.a.Body,{children:[Object(O.jsx)(x.a.Group,{children:Object(O.jsx)(x.a.Control,{onChange:function(e){a(e.target.value)},type:"text",placeholder:"Broker Name"})}),Object(O.jsx)(x.a.Group,{children:Object(O.jsx)(x.a.Control,{onChange:function(e){j(e.target.value)},type:"text",placeholder:"Account Number"})}),Object(O.jsx)(x.a.Group,{children:Object(O.jsx)(x.a.Control,{onChange:function(e){u(e.target.value)},type:"text",placeholder:"Token"})}),Object(O.jsxs)(x.a.Group,{children:[Object(O.jsx)(x.a.Label,{children:"Environment"}),Object(O.jsxs)(x.a.Control,{onChange:function(e){y(e.target.value)},as:"select",children:[Object(O.jsx)("option",{value:"live",children:"Live"}),Object(O.jsx)("option",{value:"demo",children:"Demo"})]})]}),Object(O.jsxs)(x.a.Group,{children:[Object(O.jsx)(x.a.Label,{children:"Currency"}),Object(O.jsxs)(x.a.Control,{onChange:function(e){_(e.target.value)},as:"select",children:[Object(O.jsx)("option",{value:"USD",children:"USD"}),Object(O.jsx)("option",{value:"EUR",children:"EUR"})]})]})]}),Object(O.jsxs)(E.a.Footer,{children:[Object(O.jsx)(f.a,{variant:"secondary",onClick:A,children:"Close"}),Object(O.jsx)(f.a,{variant:"primary",onClick:function(){p.a.post(e.server+"accounts/new_account/",{broker_name:c,account_number:o,env:v,token:h,currency:C}).then((function(e){return alert(e.data)})).catch((function(e){console.error("Error Message:",e)})),a(""),j(""),u(""),y("live"),_("USD"),e.hide()},children:"Save"})]})]})},ne=c.a.createContext(),ce=function(e){return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("h2",{children:"Portfolio Risk"})})},ae=function(){var e=new Date,t=Object(n.useState)(e.toISOString().substr(0,10)),r=Object(i.a)(t,2),c=(r[0],r[1]);return Object(O.jsxs)(b.a,{className:"card",children:[Object(O.jsxs)(j.a,{children:[Object(O.jsx)(d.a,{children:Object(O.jsx)(b.a.Title,{className:"card-header-first",children:"Holdings"})}),Object(O.jsx)(d.a,{children:Object(O.jsxs)(x.a.Group,{as:j.a,style:{margin:"0px",padding:"5px"},children:[Object(O.jsx)(x.a.Label,{className:"form-label-first",column:!0,sm:2,children:"Date"}),Object(O.jsx)(d.a,{sm:10,children:Object(O.jsx)(x.a.Control,{type:"date",onChange:function(e){c(e.target.value)},defaultValue:e.toISOString().substr(0,10)})})]})})]}),Object(O.jsx)("div",{style:{height:"100%",overflowY:"scroll",overflowX:"hidden"},children:Object(O.jsxs)(v.a,{children:[Object(O.jsx)("thead",{className:"table-header-first",children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{className:"table-header-row",children:"Starting Quantity"}),Object(O.jsx)("td",{className:"table-header-row",children:"Price"}),Object(O.jsx)("td",{className:"table-header-row",children:"Market Value"}),Object(O.jsx)("td",{className:"table-header-row",children:"Trade Date"}),Object(O.jsx)("td",{className:"table-header-row",children:"Instrument"}),Object(O.jsx)("td",{className:"table-header-row",children:"Instrument Type"}),Object(O.jsx)("td",{className:"table-header-row",children:"Source"})]})}),Object(O.jsx)("tbody",{})]})})]})},se=function(e){return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(ae,{})})},ie=function(e){var t=Object(n.useState)([e.default]),r=Object(i.a)(t,2),c=r[0],a=r[1];return Object(n.useEffect)((function(){p.a.get(e.server+"portfolios/get_portfolio_data/"+e.portfolio).then((function(e){return e.data.map((function(e){return e}))})).then((function(e){return a(e)})).catch((function(e){console.error("Error Message:",e)}))}),[e]),Object(O.jsxs)(b.a,{className:"card",style:{margin:"0px"},children:[Object(O.jsx)(b.a.Title,{className:"card-header-first",children:"Portfolio Details"}),Object(O.jsx)(b.a.Body,{children:Object(O.jsx)(j.a,{children:Object(O.jsxs)(d.a,{children:[Object(O.jsxs)("div",{style:{display:"flex",width:"100%"},children:[Object(O.jsx)("p",{children:"Portfolio Code"}),Object(O.jsx)("p",{style:{position:"absolute",right:"20px"},children:c[0].portfolio_code})]}),Object(O.jsxs)("div",{style:{display:"flex",width:"100%"},children:[Object(O.jsx)("p",{children:"Type"}),Object(O.jsx)("p",{style:{position:"absolute",right:"20px"},children:c[0].portfolio_type})]}),Object(O.jsxs)("div",{style:{display:"flex",width:"100%"},children:[Object(O.jsx)("p",{children:"Base Currency"}),Object(O.jsx)("p",{style:{position:"absolute",right:"20px"},children:c[0].currency})]}),Object(O.jsxs)("div",{style:{display:"flex",width:"100%"},children:[Object(O.jsx)("p",{children:"Inception Date"}),Object(O.jsx)("p",{style:{position:"absolute",right:"20px"},children:c[0].inception_date})]}),Object(O.jsxs)("div",{style:{display:"flex",width:"100%"},children:[Object(O.jsx)("p",{children:"Status"}),Object(O.jsx)("p",{style:{position:"absolute",right:"20px"},children:c[0].status})]})]})})})]})},le=function(){return Object(O.jsxs)(b.a,{className:"card",style:{margin:"0px"},children:[Object(O.jsxs)(j.a,{children:[Object(O.jsx)(d.a,{children:Object(O.jsx)(b.a.Title,{className:"card-header-first",children:"Description"})}),Object(O.jsx)(d.a,{children:Object(O.jsx)(f.a,{children:"Edit"})})]}),Object(O.jsx)(b.a.Body,{children:Object(O.jsx)(j.a,{children:Object(O.jsx)(d.a,{})})})]})},oe=function(e){var t=new Date,r=Object(n.useState)([{amount:0,currency:"USD"}]),c=Object(i.a)(r,2),a=c[0],s=c[1];return console.log(a),Object(n.useEffect)((function(){p.a.get(e.server+"portfolios/get_cash_holdings/",{params:{portfolio:e.portfolio,date:t.toISOString().substr(0,10)}}).then((function(e){return e.data.map((function(e){return e}))})).then((function(e){return s(e)})).catch((function(e){console.error("Error Message:",e)}))}),[e]),Object(O.jsxs)(b.a,{className:"card",style:{margin:"0px"},children:[Object(O.jsx)(b.a.Title,{className:"card-header-first",children:"Cash Holdings"}),Object(O.jsxs)(b.a.Subtitle,{className:"text-muted",children:["on ",t.toISOString().substr(0,10)]}),Object(O.jsx)(b.a.Body,{style:{padding:"0px"},children:Object(O.jsx)(j.a,{style:{margin:"0px",padding:"15px",display:"block"},children:Object(O.jsx)("h2",{children:a[0].amount})})})]})},je=function(e){return Object(O.jsxs)(j.a,{style:{width:"100%",height:"100%",margin:"0px"},children:[Object(O.jsxs)(j.a,{style:{width:"50%",height:"400px",background:"red",margin:"0px"},children:[Object(O.jsx)(d.a,{children:Object(O.jsx)(ie,{portfolio:e.portfolio,server:e.server,default:e.default})}),Object(O.jsx)(d.a,{children:Object(O.jsx)(le,{})})]}),Object(O.jsxs)(j.a,{style:{width:"50%",height:"150px",background:"blue",margin:"0px"},children:[Object(O.jsx)(d.a,{children:Object(O.jsx)(oe,{portfolio:e.portfolio,server:e.server})}),Object(O.jsx)(d.a,{})]}),Object(O.jsx)(j.a,{style:{width:"100%",height:"400px",background:"blue",margin:"0px"}})]})},de=function(e){return Object(O.jsx)(O.Fragment,{children:"portfolio settings"})},be=function(e){var t=new Date,r=new Date(t.getFullYear(),t.getMonth(),1),c=Object(n.useState)(r.toISOString().substr(0,10)),a=Object(i.a)(c,2),s=(a[0],a[1]),l=Object(n.useState)(t.toISOString().substr(0,10)),o=Object(i.a)(l,2),h=(o[0],o[1]),u=Object(n.useState)([]),f=Object(i.a)(u,2),g=f[0],m=f[1];return Object(n.useEffect)((function(){p.a.get(e.server+"portfolios/get_portfolio_transactions/"+e.portfolio).then((function(e){return e.data.map((function(e){return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:e[1]}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:e[2]}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:e[3]}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:e[4]}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:e[5]}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:e[6]}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:e[7]}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:e[8]})]},e[0])}))})).then((function(e){return m(e)})).catch((function(e){console.error("Error Message:",e)}))}),[e]),Object(O.jsxs)(b.a,{className:"card",children:[Object(O.jsxs)(j.a,{style:{width:"100%",margin:"0px"},children:[Object(O.jsx)(d.a,{sm:2,children:Object(O.jsx)(b.a.Title,{className:"card-header-first",children:"Transactions"})}),Object(O.jsxs)(d.a,{sm:10,style:{display:"flex"},children:[Object(O.jsx)(d.a,{children:Object(O.jsxs)(x.a.Group,{as:j.a,style:{margin:"0px",padding:"5px"},children:[Object(O.jsx)(x.a.Label,{className:"form-label-first",column:!0,sm:2,children:"From"}),Object(O.jsx)(d.a,{sm:10,children:Object(O.jsx)(x.a.Control,{type:"date",onChange:function(e){s(e.target.value)},defaultValue:r.toISOString().substr(0,10)})})]})}),Object(O.jsx)(d.a,{children:Object(O.jsxs)(x.a.Group,{as:j.a,style:{margin:"0px",padding:"5px"},children:[Object(O.jsx)(x.a.Label,{className:"form-label-first",column:!0,sm:2,children:"To"}),Object(O.jsx)(d.a,{sm:10,children:Object(O.jsx)(x.a.Control,{type:"date",onChange:function(e){h(e.target.value)},defaultValue:t.toISOString().substr(0,10)})})]})})]})]}),Object(O.jsx)("div",{style:{height:"100%",overflowY:"scroll",overflowX:"hidden"},children:Object(O.jsxs)(v.a,{children:[Object(O.jsx)("thead",{className:"table-header-first",children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{className:"table-header-row",children:"Portfolio"}),Object(O.jsx)("td",{className:"table-header-row",children:"Quantity"}),Object(O.jsx)("td",{className:"table-header-row",children:"Price"}),Object(O.jsx)("td",{className:"table-header-row",children:"Market Value"}),Object(O.jsx)("td",{className:"table-header-row",children:"Trade Date"}),Object(O.jsx)("td",{className:"table-header-row",children:"Instrument"}),Object(O.jsx)("td",{className:"table-header-row",children:"Instrument Type"}),Object(O.jsx)("td",{className:"table-header-row",children:"Source"})]})}),Object(O.jsx)("tbody",{children:g})]})})]})},he=function(e){return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(be,{portfolio:e.portfolio,server:e.server})})},ue=function(e){var t=new Date,r=new Date(t.getFullYear(),t.getMonth(),1),c=(Object(n.useContext)(N).robots,Object(n.useContext)(S).server),a=Object(n.useContext)(u).environment,s=Object(n.useContext)(ne).portfolioData,b=Object(n.useState)(s[0].portfolio_code),h=Object(i.a)(b,2),f=h[0],g=h[1],p=Object(n.useState)(r.toISOString().substr(0,10)),m=Object(i.a)(p,2),v=(m[0],m[1],Object(n.useState)(t.toISOString().substr(0,10))),y=Object(i.a)(v,2),w=(y[0],y[1],s.map((function(e){return Object(O.jsx)("option",{value:e.portfolio_code,children:e.portfolio_name},e.id)}))),C=Object(n.useState)(!1),_=Object(i.a)(C,2),A=_[0],k=_[1],E=Object(n.useState)(!1),z=Object(i.a)(E,2),D=z[0],L=z[1],T=Object(n.useState)(!1),M=Object(i.a)(T,2),I=M[0],F=M[1],B=Object(n.useState)(!1),P=Object(i.a)(B,2),R=P[0],G=P[1],V=Object(n.useState)(!1),U=Object(i.a)(V,2),W=U[0],X=U[1];return Object(O.jsxs)(o.a,{style:{background:"#FBFAFA",width:"100%",height:window.innerHeight,padding:"0px"},fluid:!0,children:[Object(O.jsxs)(j.a,{style:{height:"100%",margin:"0px"},children:[Object(O.jsxs)(Y.c,{children:[Object(O.jsx)(Y.b,{style:{padding:"5px"},children:Object(O.jsx)(x.a.Control,{onChange:function(e){g(e.target.value)},as:"select",children:w})}),Object(O.jsxs)(Y.a,{iconShape:"square",children:[Object(O.jsx)(Y.b,{onClick:function(){k(!0)},children:"New Portfolio"}),Object(O.jsxs)(Y.b,{children:["Dashboard",Object(O.jsx)(H.b,{to:"/portfolio/dashboard"})]}),Object(O.jsxs)(Y.d,{title:"Cash Operations",children:[Object(O.jsx)(Y.b,{onClick:function(){F(!0)},children:"Funding"}),Object(O.jsx)(Y.b,{children:"Withdraw"})]}),Object(O.jsxs)(Y.d,{title:"Trade",children:[Object(O.jsx)(Y.b,{onClick:function(){L(!0)},children:"Robot"}),Object(O.jsx)(Y.b,{children:"Security"})]}),Object(O.jsxs)(Y.d,{title:"Calculations",children:[Object(O.jsx)(Y.b,{onClick:function(){X(!0)},children:"Cash Holdings"}),Object(O.jsx)(Y.b,{onClick:function(){G(!0)},children:"Positions"}),Object(O.jsx)(Y.b,{children:"Holdings"}),Object(O.jsx)(Y.b,{children:"Return"})]}),Object(O.jsxs)(Y.b,{children:["Holdings",Object(O.jsx)(H.b,{to:"/portfolio/holdings"})]}),Object(O.jsxs)(Y.b,{children:["Transactions",Object(O.jsx)(H.b,{to:"/portfolio/transactions"})]}),Object(O.jsxs)(Y.b,{children:["Risk",Object(O.jsx)(H.b,{to:"/portfolio/risk"})]}),Object(O.jsxs)(Y.b,{children:["Return",Object(O.jsx)(H.b,{to:"/portfolio/return"})]}),Object(O.jsxs)(Y.b,{children:["Settings",Object(O.jsx)(H.b,{to:"/portfolio/settings"})]})]})]}),";",Object(O.jsx)(d.a,{style:{width:"50%"},children:Object(O.jsx)(j.a,{style:{padding:"15px",height:window.innerHeight,width:"100%",background:"green",margin:"0px"},children:Object(O.jsxs)(l.c,{children:[Object(O.jsx)(l.a,{path:"/portfolio/dashboard",children:Object(O.jsx)(je,{portfolio:f,server:c,default:s[0]})}),Object(O.jsx)(l.a,{path:"/portfolio/holdings",children:Object(O.jsx)(se,{portfolio:f,server:c})}),Object(O.jsx)(l.a,{path:"/portfolio/transactions",children:Object(O.jsx)(he,{portfolio:f,server:c})}),Object(O.jsx)(l.a,{path:"/portfolio/risk",children:Object(O.jsx)(ce,{portfolio:f,server:c})}),Object(O.jsx)(l.a,{path:"/portfolio/return"}),Object(O.jsx)(l.a,{path:"/portfolio/settings",children:Object(O.jsx)(de,{})})]})})})]}),"// Modals",Object(O.jsx)(q,{show:A,hide:function(){k(!1)},server:c}),Object(O.jsx)(ee,{show:D,hide:function(){L(!1)},portfolio:f,server:c,env:a}),Object(O.jsx)(te,{show:I,hide:function(){F(!1)},portfolio:f,server:c}),Object(O.jsx)(K,{show:R,hide:function(){G(!1)},server:c,portfolio:f}),Object(O.jsx)(Z,{show:W,hide:function(){X(!1)},server:c,portfolio:f})]})},xe=function(e){return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:e.id}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:e.broker_id}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:e.security}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:e.robot}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:e.quantity}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:e.price}),Object(O.jsx)("td",{children:Object(O.jsx)(f.a,{onClick:function(){p.a.post(e.server+"trade_page/close_trade/",{broker_id:e.broker_id,robot:e.robot,trd_id:e.id}).then((function(e){return alert(e.data)})).catch((function(e){console.error("Error Message:",e)}))},children:"Close"})})]})},Oe=function(e){var t=Object(n.useState)([]),r=Object(i.a)(t,2),c=r[0],a=r[1];Object(n.useEffect)((function(){fetch(e.server+"trade_page/get_open_trades/"+e.env).then((function(e){return e.json()})).then((function(e){return a(e)})).catch((function(e){console.error("Error Message:",e)}))}),[e]);var s=c.map((function(t){return Object(O.jsx)(xe,{server:e.server,id:t.id,broker_id:t.broker_id,security:t.security,robot:t.robot,quantity:t.quantity,price:t.open_price},t.id)}));return Object(O.jsx)(b.a,{style:{width:"100%"},children:Object(O.jsxs)(v.a,{children:[Object(O.jsx)("thead",{style:{fontSize:12},children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{style:{verticalAlign:"middle"},children:"Platform ID"}),Object(O.jsx)("th",{style:{verticalAlign:"middle"},children:"Broker ID"}),Object(O.jsx)("th",{style:{verticalAlign:"middle"},children:"Security"}),Object(O.jsx)("th",{style:{verticalAlign:"middle"},children:"Robot"}),Object(O.jsx)("th",{style:{verticalAlign:"middle"},children:"Quantity"}),Object(O.jsx)("th",{style:{verticalAlign:"middle"},children:"Price"}),Object(O.jsx)("th",{style:{verticalAlign:"middle"}})]})}),Object(O.jsx)("tbody",{style:{height:"100%",overflow:"scroll"},children:s})]})})},fe=function(e){var t=Object(n.useState)(""),r=Object(i.a)(t,2),c=(r[0],r[1],Object(n.useState)()),a=Object(i.a)(c,2);a[0],a[1];return Object(O.jsxs)(b.a,{style:{},className:"card",children:[Object(O.jsx)(b.a.Title,{className:"card-header-first",children:"Robot Trade Execution"}),Object(O.jsx)("div",{style:{height:"200px",width:"200px"}})]})},ge=function(){var e=Object(n.useContext)(S).server,t=Object(n.useContext)(u).environment;return Object(O.jsxs)(o.a,{className:"border",style:{background:"#FBFAFA",width:"100%",height:window.innerHeight,padding:"20px"},fluid:!0,children:[Object(O.jsxs)(j.a,{style:{height:"400px"},children:[Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsxs)(b.a,{style:{height:"100%"},className:"card",children:[Object(O.jsx)(b.a.Title,{className:"card-header-first",children:"Portfolio Trade"}),Object(O.jsx)("div",{style:{height:"500px",overflowY:"scroll",overflowX:"hidden"}})]})}),Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsxs)(b.a,{style:{height:"100%"},className:"card",children:[Object(O.jsx)(b.a.Title,{className:"card-header-first",children:"Robot Trade"}),Object(O.jsx)("div",{style:{height:"500px",overflowY:"scroll",overflowX:"hidden"},children:Object(O.jsx)(fe,{})})]})})]}),Object(O.jsx)("br",{}),Object(O.jsx)(j.a,{style:{height:"500px"},children:Object(O.jsx)(Oe,{env:t,server:e})})]})},pe=r(219),me=r(220),ve=(r(180),r(82)),ye=r(39),Se=r(77),we=r(72),Ce=r.n(we),_e=r(38),Ae=function(e){var t=(new Date).toISOString().substr(0,10),r=Object(n.useState)(t),c=Object(i.a)(r,2),a=c[0],s=(c[1],Object(n.useState)([])),l=Object(i.a)(s,2),o=l[0],j=l[1],d=[],b=[];o.forEach((function(e){"Process"===e.msg_type&&b.push(e),"Trade"===e.msg_type&&d.push(e)})),Object(n.useEffect)((function(){var t=setInterval((function(){p.a.get(e.server+"home/system_messages/not_verified",{params:{date:a}}).then((function(e){return j(e.data)})).catch((function(e){console.error("Error Message:",e)}))}),9e5);return function(){return clearInterval(t)}}),[]);var h=function(t){p.a.get(e.server+"home/verify_sys_msg/"+t).then((function(e){return console.log(e.data)})).catch((function(e){console.error("Error Message:",e)}))};return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(x.a,{style:{margin:"5px"},children:Object(O.jsx)(f.a,{className:"rounded-circle block-example border border-light",id:"notError",style:{background:"#49A75D",border:""},children:Object(O.jsx)(_e.h,{style:{}})})}),Object(O.jsx)(x.a,{style:{margin:"5px"},children:Object(O.jsx)(f.a,{className:"rounded-circle block-example border border-light",id:"notRisk",style:{background:"#49A75D"},children:Object(O.jsx)(_e.k,{})})}),Object(O.jsx)(x.a,{onClick:function(){b.forEach((function(e){we.store.addNotification({title:e.msg_type+" - "+e.msg_sub_type,message:e.msg,type:"success",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],onRemoval:function(){h(e.id)}})}))},style:{margin:"5px"},children:Object(O.jsx)(f.a,{className:"rounded-circle block-example border border-light",id:"notProcess",style:{background:"#49A75D"},children:Object(O.jsx)(_e.f,{style:{}})})}),Object(O.jsx)(x.a,{style:{margin:"5px"},children:Object(O.jsx)(f.a,{className:"rounded-circle block-example border border-light",onClick:function(){d.forEach((function(e){we.store.addNotification({title:e.msg_type+" - "+e.msg_sub_type,message:e.msg,type:"success",insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],onRemoval:function(){h(e.id)}})}))},id:"notTrades",style:{background:"#49A75D"},children:Object(O.jsx)(_e.b,{style:{}})})})]})},ke=c.a.createContext({}),Ne=function(e){var t=Object(n.useContext)(ke).startDate,r=Object(n.useContext)(ke).endDate,c=Object(n.useContext)(ke).saveStartDate,a=Object(n.useContext)(ke).saveEndDate;return Object(O.jsxs)(j.a,{style:{height:"60px",width:"100%",padding:"5px",margin:"0px"},children:[Object(O.jsx)(d.a,{style:{height:"100%",width:"50%"},children:Object(O.jsxs)(x.a.Group,{as:j.a,children:[Object(O.jsx)(x.a.Label,{size:"sm",column:!0,sm:2,children:"From"}),Object(O.jsx)(d.a,{sm:10,children:Object(O.jsx)(x.a.Control,{size:"sm",type:"date",onChange:function(e){c(e.target.value)},defaultValue:t})})]})}),Object(O.jsx)(d.a,{style:{height:"100%",width:"50%"},children:Object(O.jsxs)(x.a.Group,{as:j.a,children:[Object(O.jsx)(x.a.Label,{className:"form-label-first",column:!0,sm:2,children:"To"}),Object(O.jsx)(d.a,{sm:10,children:Object(O.jsx)(x.a.Control,{size:"sm",type:"date",onChange:function(e){e.target.value<t?alert("End date can not be less then start date!"):a(e.target.value)},defaultValue:r})})]})})]})},Ee=function(e){var t=Object(n.useContext)(ke).startDate,r=Object(n.useContext)(ke).endDate,c=Object(n.useContext)(ke).saveStartDate,a=Object(n.useContext)(ke).saveEndDate,s=Object(n.useContext)(S).server,l=Object(n.useState)(!1),o=Object(i.a)(l,2),j=o[0],d=o[1];return Object(O.jsxs)(pe.a,{bg:"dark",variant:"dark",children:[Object(O.jsx)(pe.a.Brand,{href:"react",children:"FFM SYSTEM"}),Object(O.jsxs)(me.a,{className:"mr-auto",children:[Object(O.jsx)(me.a.Link,{as:H.b,to:"/home",children:"Home"}),Object(O.jsx)(me.a.Link,{as:H.b,to:"/portfolio",children:"Portfolio"}),Object(O.jsx)(me.a.Link,{as:H.b,to:"/robot/dashboard",children:"Robot"}),Object(O.jsx)(me.a.Link,{as:H.b,to:"/risk",children:"Risk"}),Object(O.jsx)(me.a.Link,{as:H.b,to:"/instruments",children:"Instrument"}),Object(O.jsx)(me.a.Link,{as:H.b,to:"/trade",children:"Trade"}),Object(O.jsxs)(Se.a,{title:"Broker Accounts",children:[Object(O.jsx)(Se.a.Item,{onSelect:function(){d(!0)},children:"New"}),Object(O.jsx)(Se.a.Item,{children:"Update"}),Object(O.jsx)(Se.a.Item,{children:"Delete"})]}),Object(O.jsxs)(Se.a,{title:"Period",children:[Object(O.jsx)(x.a.Label,{children:"From"}),Object(O.jsx)(ve.a,{type:"date",className:"me-2","aria-label":"Search",defaultValue:t,onChange:function(e){c(e.target.value)}}),Object(O.jsx)(x.a.Label,{children:"To"}),Object(O.jsx)(ve.a,{type:"date",className:"me-2","aria-label":"Search",defaultValue:r,onChange:function(e){e.target.value<t?alert("End date can not be less then start date!"):a(e.target.value)}})]})]}),Object(O.jsx)(Ae,{server:s}),Object(O.jsx)(me.a.Link,{href:"#",disabled:!0,children:"Environment"}),Object(O.jsxs)(ye.a,{onSelect:function(t){e.onEnvChange(t)},style:{margin:"5px"},children:[Object(O.jsx)(ye.a.Toggle,{variant:"success",id:"dropdown-basic",children:e.env}),Object(O.jsxs)(ye.a.Menu,{children:[Object(O.jsx)(ye.a.Item,{eventKey:"live",children:"Live"}),Object(O.jsx)(ye.a.Item,{eventKey:"demo",children:"Demo"})]})]}),Object(O.jsx)(re,{show:j,hide:function(){d(!1)},server:s})]})},ze=function(e){var t=Object(n.useState)(""),r=Object(i.a)(t,2),c=r[0],a=r[1],s=Object(n.useState)(""),l=Object(i.a)(s,2),o=l[0],j=l[1],d=Object(n.useState)("oanda"),b=Object(i.a)(d,2),h=b[0],u=b[1],g=Object(n.useState)("live"),m=Object(i.a)(g,2),v=m[0],y=m[1],S=Object(n.useState)(""),w=Object(i.a)(S,2),C=w[0],_=w[1],A=Object(n.useState)(""),k=Object(i.a)(A,2),N=k[0],D=k[1];console.log(C),console.log(N);var L=function(){e.hide()},T={broker:h,env:v},M={broker:h},I=function(t){t.preventDefault(),p.a.post(e.server+"robots/new_robot/",{robot_name:c,strategy:o,security:N,broker:h,env:v,account:C}).then((function(e){return console.log(e)})).catch((function(e){console.error("Error Message:",e)})),e.hide()};return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(E.a,{show:e.show,onHide:L,animation:!1,children:[Object(O.jsx)(E.a.Header,{closeButton:!0,children:Object(O.jsx)(E.a.Title,{children:"New Robot"})}),Object(O.jsx)(E.a.Body,{children:Object(O.jsxs)(x.a,{onSubmit:I,style:{width:"100%"},children:[Object(O.jsxs)(x.a.Group,{children:[Object(O.jsx)(x.a.Label,{children:"Robot Name"}),Object(O.jsx)(x.a.Control,{onChange:function(e){a(e.target.value)},type:"text",placeholder:"Robot Name",maxLength:20})]}),Object(O.jsxs)(x.a.Group,{children:[Object(O.jsx)(x.a.Label,{children:"Strategy"}),Object(O.jsxs)(x.a.Control,{onChange:function(e){j(e.target.value)},as:"select",children:[Object(O.jsx)("option",{value:"Initiative",children:"Initiative"}),Object(O.jsx)("option",{value:"Responsive",children:"Responsive"}),Object(O.jsx)("option",{value:"Correction",children:"Correction"})]})]}),Object(O.jsxs)(x.a.Group,{children:[Object(O.jsx)(x.a.Label,{children:"Broker"}),Object(O.jsxs)(x.a.Control,{onChange:function(e){u(e.target.value)},as:"select",children:[Object(O.jsx)("option",{children:"oanda"}),Object(O.jsx)("option",{children:"Fix"})]})]}),Object(O.jsxs)(x.a.Group,{children:[Object(O.jsx)(x.a.Label,{children:"Environment"}),Object(O.jsxs)(x.a.Control,{onChange:function(e){y(e.target.value)},as:"select",children:[Object(O.jsx)("option",{value:"live",children:"Live"}),Object(O.jsx)("option",{value:"demo",children:"Demo"})]})]}),Object(O.jsxs)(x.a.Group,{children:[Object(O.jsx)(x.a.Label,{children:"Instruments"}),Object(O.jsx)(x.a.Control,{onChange:function(e){D(e.target.value)},as:"select",children:Object(O.jsx)(z,{url:e.server+"instruments/get_instruments/",params:M,code:"instrument_name",value:"instrument_name"})})]}),Object(O.jsxs)(x.a.Group,{children:[Object(O.jsx)(x.a.Label,{children:"Account Number"}),Object(O.jsx)(x.a.Control,{onChange:function(e){_(e.target.value)},as:"select",children:Object(O.jsx)(z,{url:e.server+"accounts/get_accounts_data/",params:T,code:"account_number",value:"account_number"})})]})]})}),Object(O.jsxs)(E.a.Footer,{children:[Object(O.jsx)(f.a,{variant:"secondary",onClick:L,children:"Close"}),Object(O.jsx)(f.a,{variant:"primary",onClick:I,children:"Save"})]})]})})},De=function(e){var t=Object(n.useContext)(ke).startDate,r=Object(n.useContext)(ke).endDate,c=Object(n.useState)(!1),a=Object(i.a)(c,2),s=(a[0],a[1]);return Object(O.jsxs)(E.a,{show:e.show,onHide:function(){e.hide()},animation:!1,children:[Object(O.jsx)(E.a.Header,{closeButton:!0,children:Object(O.jsxs)(E.a.Title,{children:["Balance - ",e.robot]})}),Object(O.jsx)(E.a.Body,{style:{width:"100%",height:"100px"},children:Object(O.jsx)(Ne,{})}),Object(O.jsx)(E.a.Footer,{children:Object(O.jsx)(f.a,{variant:"primary",onClick:function(n){n.preventDefault(),s(!0),p.a.post(e.server+"robots/calculate_robot_balance/",{process:"Balance",robot:e.robot,start_date:t,end_date:r}).then((function(e){return s(!1)})).catch((function(e){console.error("Error Message:",e)}))},children:"Calculate"})})]})},Le=function(e){var t=Object(n.useState)(e.robots),r=Object(i.a)(t,2),c=r[0],a=r[1];Object(n.useEffect)((function(){p.a.get(e.server+"robots/get_robots/"+e.env).then((function(e){return a(e.data)})).catch((function(e){console.error("Error Message:",e)}))}),[e]);var s=c.map((function(e){return Object(O.jsx)("option",{value:e.name,children:e.name},e.id)}));return Object(O.jsx)(x.a.Group,{as:j.a,children:Object(O.jsx)(d.a,{sm:10,children:Object(O.jsx)(x.a.Control,{onChange:function(t){e.robotChange(t.target.value)},as:"select",style:{margin:"0px",width:"100%"},children:s})})})},Te=function(e){var t=new Date,r=new Date(t.getFullYear(),t.getMonth(),1),c=Object(n.useState)(r.toISOString().substr(0,10)),a=Object(i.a)(c,2),s=a[0],l=a[1],o=Object(n.useState)(t.toISOString().substr(0,10)),b=Object(i.a)(o,2),h=b[0],u=b[1],g=Object(n.useState)(e.robot),m=Object(i.a)(g,2),v=m[0],y=m[1],S=Object(n.useState)([]),w=Object(i.a)(S,2),C=w[0],_=w[1],A=C.map((function(e,t){var r=e.response.map((function(e){return Object(O.jsx)(J.a,{label:e.date+" "+e.msg})}));return Object(O.jsx)(J.a,{nodeId:t.toString(),label:e.robot,children:r})})),k=function(t){t.preventDefault(),p.a.post(e.server+"robots/pricing/",{robot:v,start_date:s,end_date:h}).then((function(e){return _(e.data)})).catch((function(e){console.error("Error Message:",e)}))};return Object(O.jsxs)(E.a,{show:e.show,onHide:function(){e.hide(),y(e.robot)},animation:!1,size:"xl",children:[Object(O.jsx)(E.a.Header,{closeButton:!0,children:Object(O.jsxs)(E.a.Title,{children:["Pricing - ",v]})}),Object(O.jsx)(E.a.Body,{children:Object(O.jsxs)(j.a,{style:{height:"100%"},children:[Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsx)(x.a,{onSubmit:k,style:{width:"100%",height:"100%"},children:Object(O.jsxs)(j.a,{style:{height:"60px",width:"100%",padding:"5px",margin:"5px"},children:[Object(O.jsx)(j.a,{style:{width:"100%",margin:"0px"},children:Object(O.jsxs)(x.a.Group,{style:{width:"100%",margin:"0px"},children:[Object(O.jsx)(x.a.Label,{className:"form-label-first",column:!0,sm:2,children:"From"}),Object(O.jsx)(d.a,{sm:10,children:Object(O.jsx)(x.a.Control,{type:"date",onChange:function(e){l(e.target.value)},defaultValue:r.toISOString().substr(0,10)})})]})}),Object(O.jsx)(j.a,{style:{width:"100%",margin:"0px"},children:Object(O.jsxs)(x.a.Group,{style:{width:"100%"},children:[Object(O.jsx)(x.a.Label,{className:"form-label-first",column:!0,sm:2,children:"To"}),Object(O.jsx)(d.a,{sm:10,children:Object(O.jsx)(x.a.Control,{type:"date",onChange:function(e){u(e.target.value)},defaultValue:t.toISOString().substr(0,10)})})]})})]})})}),Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsx)(V.a,{"aria-label":"file system navigator",defaultCollapseIcon:Object(O.jsx)(W.a,{}),defaultExpandIcon:Object(O.jsx)(Q.a,{}),sx:{height:200,flexGrow:1,maxWidth:"100%",overflowY:"auto"},children:A})})]})}),Object(O.jsx)(E.a.Footer,{children:Object(O.jsxs)(j.a,{style:{width:"100%",margin:"0px"},children:[Object(O.jsx)(d.a,{children:Object(O.jsx)(x.a.Group,{className:"mb-3",controlId:"formBasicCheckbox",children:Object(O.jsx)(x.a.Check,{onClick:function(t){t.target.checked?y("ALL"):y(e.robot),console.log(t.target.checked)},type:"checkbox",label:"All Robots"})})}),Object(O.jsx)(d.a,{children:Object(O.jsx)(x.a.Group,{style:{width:"100%"},children:Object(O.jsx)(d.a,{sm:10,children:Object(O.jsx)(f.a,{variant:"primary",onClick:k,style:{width:"100%"},children:"Calculate"})})})})]})})]})},Me=function(e){return Object(O.jsxs)(b.a,{className:"card",style:{margin:"0px"},children:[Object(O.jsx)(b.a.Title,{style:{margin:"0px"},className:"card-header-first",children:e.title}),Object(O.jsx)(b.a.Body,{style:{display:"flex",justifyContent:"center",padding:"5px"},children:e.children})]})},Ie=function(e){var t={options:{chart:{type:"area",toolbar:!1,id:"basic-bar"},xaxis:{categories:[],labels:{show:!1},axisBorder:{show:!1,color:"#78909C",height:1,width:"100%",offsetX:0,offsetY:0},axisTicks:{show:!1,borderType:"solid",color:"#78909C",height:6,offsetX:0,offsetY:0}},yaxis:[{labels:{formatter:function(e){return e.toFixed(0)}}}],dataLabels:{enabled:!1}},title:{text:"Cumulative Return",align:"left",margin:10,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:"bold",color:"#263238"}},series:[{name:"series-1",data:e.data}]};return Object(O.jsxs)(b.a,{className:"card",style:{margin:"0px"},children:[Object(O.jsx)(b.a.Title,{className:"card-header-first",children:e.title}),Object(O.jsx)(b.a.Body,{style:{padding:"0px"},children:Object(O.jsx)(j.a,{style:{height:"100%",width:"100%",margin:"0px"},children:Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsx)("div",{style:{padding:"0px",height:"100%"},children:Object(O.jsx)(k.a,{options:t.options,series:t.series,type:"area",width:"100%",height:"100%"})})})})})]})},Fe=r(80),Be=r.n(Fe),Pe=function(e){var t=Object(n.useState)(),r=Object(i.a)(t,2),c=r[0],a=r[1];return Object(n.useEffect)((function(){p.a.get(e.server+"robots/robot_cash_flow/"+e.robot).then((function(e){return e.data.map((function(e){return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:e.id}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle",color:e.cash_flow>0?"green":"red"},children:e.cash_flow}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:e.date})]},e.id)}))})).then((function(e){return a(e)})).catch((function(e){console.error("Error Message:",e)}))}),[e]),Object(O.jsxs)(b.a,{className:"card",style:{margin:"2px",height:"100%"},children:[Object(O.jsxs)(b.a.Title,{className:"card-header-first",children:["Cash Flow",Object(O.jsx)(Be.a,{id:"test-table-xls-button",className:"download-table-xls-button",table:"cash-flow-table",filename:"cash_flow",sheet:"cash_flow",buttonText:"Export to Excel"})]}),Object(O.jsx)("div",{style:{overflowY:"scroll",overflowX:"hidden",height:"100%"},children:Object(O.jsxs)(v.a,{id:"cash-flow-table",children:[Object(O.jsx)("thead",{style:{fontSize:12},children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{style:{verticalAlign:"middle"},children:"ID"}),Object(O.jsx)("th",{style:{verticalAlign:"middle"},children:"Cash Flow"}),Object(O.jsx)("th",{style:{verticalAlign:"middle"},children:"Date"})]})}),Object(O.jsx)("tbody",{style:{height:"100%",overflow:"scroll"},children:c})]})})]})},Re=r(99),Ge=function(e){for(var t=Object(n.useState)([]),r=Object(i.a)(t,2),c=r[0],a=r[1],s=Object(n.useContext)(ke).startDate,l=Object(n.useContext)(ke).endDate,o=c.length,j=[],d=[],h=[],u=[],x=[],f=[],g=[],m=[],y=0,S=0,w=0,C=0,_=0,A=0,k=0,N=0;N<c.length;N++)k+=c[N].pnl;var E,z=Object(Re.a)(c);try{for(z.s();!(E=z.n()).done;){var D=E.value;D.quantity<0?(j.push(D.quantity),D.pnl<0?f.push(D.pnl):x.push(D.pnl)):(d.push(D.quantity),D.pnl<0?u.push(D.pnl):h.push(D.pnl)),D.pnl<0?m.push(D.pnl):g.push(D.pnl)}}catch(P){z.e(P)}finally{z.f()}for(var L=0;L<m.length;L++)S+=m[L];for(var T=0;T<g.length;T++)y+=g[T];for(var M=0;M<h.length;M++)w+=h[M];for(var I=0;I<x.length;I++)C+=x[I];for(var F=0;F<u.length;F++)_+=u[F];for(var B=0;B<f.length;B++)A+=f[B];return Object(n.useEffect)((function(){p.a.get(e.server+"robots/trades/",{params:{robot:e.robot,start_date:s,end_date:l}}).then((function(e){return a(e.data)})).catch((function(e){console.error("Error Message:",e)}))}),[e]),Object(O.jsxs)(b.a,{className:"card",style:{margin:"2px",height:"100%"},children:[Object(O.jsx)(b.a.Title,{className:"card-header-first",children:"Statistics"}),Object(O.jsx)("div",{style:{overflowY:"scroll",overflowX:"hidden",height:"100%"},children:Object(O.jsxs)(v.a,{id:"cash-flow-table",children:[Object(O.jsx)("thead",{style:{fontSize:12},children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{style:{verticalAlign:"middle"}}),Object(O.jsx)("th",{style:{verticalAlign:"middle"},children:"All"}),Object(O.jsx)("th",{style:{verticalAlign:"middle"},children:"Long"}),Object(O.jsx)("th",{style:{verticalAlign:"middle"},children:"Short"})]})}),Object(O.jsxs)("tbody",{style:{height:"100%",overflow:"scroll"},children:[Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle",textAlign:"left"},children:"Profit"}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle",color:k>0?"green":"red"},children:Math.round(100*k)/100}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle",color:w+_>0?"green":"red"},children:Math.round(100*(w+_))/100}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle",color:C+A>0?"green":"red"},children:Math.round(100*(C+A))/100})]},0),Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle",textAlign:"left"},children:"Total Trades Closed"}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:o}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:d.length}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:j.length})]},1),Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle",textAlign:"left"},children:"Number Winning Trades"}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:g.length}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:h.length}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:x.length})]},2),Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle",textAlign:"left"},children:"Number Losing Trades"}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:m.length}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:u.length}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:f.length})]},3),Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle",textAlign:"left"},children:"Profitable P&L"}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle",color:y>0?"green":"red"},children:Math.round(100*y)/100}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:Math.round(100*w)/100}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:Math.round(100*C)/100})]},4),Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle",textAlign:"left"},children:"Losing P&L"}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle",color:S>0?"green":"red"},children:Math.round(100*S)/100}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:Math.round(100*_)/100}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:Math.round(100*A)/100})]},5),Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle",textAlign:"left"},children:"Profitable Trades %"}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:Math.round(g.length/c.length*1e4)/100}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:Math.round(h.length/c.length*1e4)/100}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:Math.round(x.length/c.length*1e4)/100})]},6),Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle",textAlign:"left"},children:"Losing Trades %"}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:Math.round(m.length/c.length*1e4)/100}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:Math.round(u.length/c.length*1e4)/100}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:Math.round(f.length/c.length*1e4)/100})]},7),Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle",textAlign:"left"},children:"Avg Winning Trade"}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:Math.round(y/o*100)/100}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:Math.round(w/o*100)/100}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:Math.round(C/o*100)/100})]},8),Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle",textAlign:"left"},children:"Avg Losing Trade"}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:Math.round(S/o*100)/100}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:Math.round(_/o*100)/100}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:Math.round(A/o*100)/100})]},9),Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle",textAlign:"left"},children:"Profit Factor"}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:1}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle",color:"green"},children:10}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:10})]},10),Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle",textAlign:"left"},children:"Profit Factor"}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:1}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle",color:"green"},children:10}),Object(O.jsx)("td",{style:{fontSize:12,verticalAlign:"middle"},children:10})]},11)]})]})})]})},He=function(e){var t=Object(n.useContext)(ke).startDate,r=Object(n.useContext)(ke).endDate,c=Object(n.useState)([]),a=Object(i.a)(c,2),s=a[0],l=a[1],b=Object(n.useState)([]),h=Object(i.a)(b,2),u=h[0],x=h[1],f=Object(n.useState)([]),g=Object(i.a)(f,2),m=(g[0],g[1]),v=Object(n.useState)([]),y=Object(i.a)(v,2),S=(y[0],y[1]),w=Object(n.useState)([e.default]),C=Object(i.a)(w,2),_=C[0],A=C[1],k=Object(n.useState)([]),N=Object(i.a)(k,2),E=N[0],z=N[1];Math.round(100*u.reduce((function(e,t){return e+t}),0));return Object(n.useEffect)((function(){p.a.get(e.server+"robots/get_robot/"+e.robot).then((function(e){return e.data.map((function(e){return e}))})).then((function(e){return A(e)})).catch((function(e){console.error("Error Message:",e)}))}),[e]),Object(n.useEffect)((function(){p.a.get(e.server+"robots/get_last_price/",{params:{robot:e.robot,start_date:e.start_date,end_date:e.end_date}}).then((function(e){var t=e.data;z(t)})).catch((function(e){console.error("Error Message:",e)}))}),[e]),Object(n.useEffect)((function(){p.a.get(e.server+"robots/get_balance/",{params:{robot:e.robot,start_date:t,end_date:r}}).then((function(e){var t=e.data,r=t.map((function(e){return e.close_balance})),n=t.map((function(e){return e.realized_pnl})),c=t.map((function(e){return e.date})),a=t.map((function(e){return e.cash_flow}));l(r),x(n),S(c),m(a)})).catch((function(e){console.error("Error Message:",e)}))}),[e]),Object(O.jsxs)(o.a,{fluid:!0,children:[Object(O.jsxs)(j.a,{style:{height:"100px"},children:[Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsx)(Me,{title:"Strategy",children:Object(O.jsx)("p",{style:{margin:"auto",verticalAlign:"middle",fontSize:16},children:_[0].strategy})})}),Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsx)(Me,{title:"Security",children:Object(O.jsx)("p",{style:{margin:"auto",verticalAlign:"middle",fontSize:16},children:_[0].security})})}),Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsx)(Me,{title:"Inception Date",children:Object(O.jsx)("p",{style:{margin:"auto",verticalAlign:"middle",fontSize:16},children:_[0].inception_date})})}),Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsx)(Me,{title:"Broker",children:Object(O.jsx)("p",{style:{margin:"auto",verticalAlign:"middle",fontSize:16},children:_[0].broker})})}),Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsx)(Me,{title:"Account Number",children:Object(O.jsx)("p",{style:{margin:"auto",verticalAlign:"middle",fontSize:16},children:_[0].account_number})})}),Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsx)(Me,{title:"Last Price",children:Object(O.jsx)("p",{style:{margin:"auto",verticalAlign:"middle",fontSize:16},children:Math.round(100*E.price)/100})})}),Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsx)(Me,{title:"Last Pricing Date",children:Object(O.jsx)("p",{style:{margin:"auto",verticalAlign:"middle",fontSize:16,color:E.date<r?"red":"green"},children:E.date})})})]}),Object(O.jsxs)(j.a,{style:{height:"600px",marginTop:"15px"},children:[Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsx)(Ge,{server:e.server,robot:e.robot})}),Object(O.jsxs)(d.a,{style:{height:"100%"},children:[Object(O.jsx)("div",{style:{height:"80%"},children:Object(O.jsx)(Ie,{data:s,title:"Balance History"})}),Object(O.jsx)("div",{style:{height:"20%",padding:"0px",marginTop:"4px"},children:Object(O.jsx)(Me,{title:"Last Balance",children:Object(O.jsx)("p",{style:{margin:"auto",verticalAlign:"middle",fontSize:40},children:Math.round(100*s[s.length-1])/100})})})]}),Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsx)(Pe,{server:e.server,robot:e.robot})})]})]})},qe=function(e){var t={options:{chart:{toolbar:!1,id:"basic-bar"},colors:[function(e){return e.value<0?"#E32227":"#007500"}],xaxis:{categories:[],labels:{show:!1}},yaxis:[{labels:{formatter:function(e){return e.toFixed(0)}},title:{text:"Profit"}}],dataLabels:{enabled:!1}},series:[{name:"series-1",data:e.data}]};return Object(O.jsxs)(b.a,{className:"card",style:{margin:"2px",height:"100%"},children:[Object(O.jsx)(b.a.Title,{className:"card-header-first",children:"Profit and Loss"}),Object(O.jsx)(b.a.Body,{style:{padding:"0px"},children:Object(O.jsx)(k.a,{options:t.options,series:t.series,type:"bar",width:"100%",height:"100%"})})]})},Ye=c.a.createContext({}),Ve=function(e){var t=Object(n.useContext)(Ye).saveModalDataParameters,r=Object(n.useRef)(),c=Object(n.useRef)(),a=Object(n.useRef)(),s=Object(n.useRef)(),i=Object(n.useRef)(),l=Object(n.useRef)(),o=Object(n.useRef)(),j=function(t){t.preventDefault();var n=r.current.value,j=c.current.value,d=a.current.value,b=s.current.value,h=i.current.value,u=l.current.value,x=o.current.value;p.a.post(e.server+"trade_page/edit_transaction/",{status:j,quantity:n,pnl:d,open_price:b,close_price:h,open_time:u,close_time:x,id:e.data[9]}).catch((function(e){console.error("Error Message:",e)}))};return Object(O.jsxs)(E.a,{show:e.show,onHide:function(){t({data:[],status:!1})},animation:!1,children:[Object(O.jsx)(E.a.Header,{closeButton:!0,children:Object(O.jsxs)(E.a.Title,{children:["Edit Transaction - Broker ID - ",e.data[8]]})}),Object(O.jsx)(E.a.Body,{style:{width:"100%",height:"700px"},children:Object(O.jsxs)(x.a,{onSubmit:j,style:{width:"100%"},children:[Object(O.jsxs)(x.a.Group,{className:"mb-3",controlId:"quantity_type",children:[Object(O.jsx)(x.a.Label,{children:"Status"}),Object(O.jsxs)(x.a.Control,{ref:c,defaultValue:e.data[1],as:"select",children:[Object(O.jsx)("option",{value:"OPEN",children:"OPEN"}),Object(O.jsx)("option",{value:"CLOSED",children:"CLOSED"})]})]}),Object(O.jsxs)(x.a.Group,{className:"mb-3",children:[Object(O.jsx)(x.a.Label,{children:"Quantity"}),Object(O.jsx)(x.a.Control,{ref:r,type:"number",defaultValue:e.data[0],step:1})]}),Object(O.jsxs)(x.a.Group,{className:"mb-3",children:[Object(O.jsx)(x.a.Label,{children:"P&L"}),Object(O.jsx)(x.a.Control,{ref:a,type:"number",defaultValue:e.data[2],step:1})]}),Object(O.jsxs)(x.a.Group,{className:"mb-3",children:[Object(O.jsx)(x.a.Label,{children:"Open Price"}),Object(O.jsx)(x.a.Control,{ref:s,type:"number",defaultValue:e.data[3],min:0,step:.01})]}),Object(O.jsxs)(x.a.Group,{className:"mb-3",children:[Object(O.jsx)(x.a.Label,{children:"Close Price"}),Object(O.jsx)(x.a.Control,{ref:i,type:"number",defaultValue:e.data[4],min:0,step:.01})]}),Object(O.jsxs)(x.a.Group,{className:"mb-3",children:[Object(O.jsx)(x.a.Label,{children:"Open Time"}),Object(O.jsx)(x.a.Control,{ref:l,type:"date",defaultValue:e.data[5]})]}),Object(O.jsxs)(x.a.Group,{className:"mb-3",children:[Object(O.jsx)(x.a.Label,{children:"Close Time"}),Object(O.jsx)(x.a.Control,{ref:o,type:"date",defaultValue:e.data[6]})]})]})}),Object(O.jsx)(E.a.Footer,{children:Object(O.jsx)(f.a,{variant:"primary",onClick:j,children:"Save"})})]})},Ue=function(e){var t=Object(n.useContext)(Ye).saveModalDataParameters;return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{style:{fontSize:14,verticalAlign:"middle"},children:e.quantity}),Object(O.jsx)("td",{style:{fontSize:14,verticalAlign:"middle"},children:e.status}),Object(O.jsx)("td",{style:{fontSize:14,verticalAlign:"middle",color:e.pnl<0?"#E32227":"#007500"},children:e.pnl}),Object(O.jsx)("td",{style:{fontSize:14,verticalAlign:"middle"},children:e.open_price}),Object(O.jsx)("td",{style:{fontSize:14,verticalAlign:"middle"},children:e.close_price}),Object(O.jsx)("td",{style:{fontSize:14,verticalAlign:"middle"},children:e.open_time}),Object(O.jsx)("td",{style:{fontSize:14,verticalAlign:"middle"},children:e.close_time}),Object(O.jsx)("td",{style:{fontSize:14,verticalAlign:"middle"},children:e.side}),Object(O.jsx)("td",{style:{fontSize:14,verticalAlign:"middle"},children:e.broker_id}),Object(O.jsx)("td",{style:{fontSize:14,verticalAlign:"middle"},children:e.id}),Object(O.jsx)("td",{children:Object(O.jsx)(f.a,{onClick:function(e){for(var r=e.target.parentElement.parentElement.children,n=[],c=0;c<r.length;c++)n.push(r[c].innerHTML);t({data:n,status:!0})},children:"Update"})})]})})},We=function(e){var t=Object(n.useState)({data:[],status:!1}),r=Object(i.a)(t,2),c=r[0],a=r[1],s=e.data.map((function(e){return Object(O.jsx)(Ue,{quantity:e.quantity,status:e.status,pnl:e.pnl,open_price:e.open_price,close_price:e.close_price,open_time:e.open_time,close_time:e.close_time,side:e.side,broker_id:e.broker_id,id:e.id},e.id)}));return console.log(c),Object(O.jsx)(Ye.Provider,{value:{saveModalDataParameters:a},children:Object(O.jsxs)(b.a,{className:"card",style:{margin:"2px",height:"100%"},children:[Object(O.jsxs)(b.a.Title,{className:"card-header-first",children:["Transactions",Object(O.jsx)(Be.a,{id:"test-table-xls-button",className:"download-table-xls-button",table:"transaction-table",filename:"transactions",sheet:"transactions",buttonText:"Export to Excel"})]}),Object(O.jsx)("div",{style:{overflowY:"scroll",overflowX:"hidden",height:"100%"},children:Object(O.jsxs)(v.a,{id:"transaction-table",children:[Object(O.jsx)("thead",{style:{fontSize:12},children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{style:{verticalAlign:"middle"},children:"Quantity"}),Object(O.jsx)("th",{style:{verticalAlign:"middle"},children:"Status"}),Object(O.jsx)("th",{style:{verticalAlign:"middle"},children:"P&L"}),Object(O.jsx)("th",{style:{verticalAlign:"middle"},children:"Open Price"}),Object(O.jsx)("th",{style:{verticalAlign:"middle"},children:"Close Price"}),Object(O.jsx)("th",{style:{verticalAlign:"middle"},children:"Open Time"}),Object(O.jsx)("th",{style:{verticalAlign:"middle"},children:"Close Time"}),Object(O.jsx)("th",{style:{verticalAlign:"middle"},children:"Side"}),Object(O.jsx)("th",{style:{verticalAlign:"middle"},children:"Broker ID"}),Object(O.jsx)("th",{style:{verticalAlign:"middle"},children:"ID"}),Object(O.jsx)("th",{style:{verticalAlign:"middle"}})]})}),Object(O.jsx)("tbody",{style:{height:"100%",overflow:"scroll"},children:s})]})}),Object(O.jsx)(Ve,{server:e.server,show:c.status,data:c.data})]})})},Xe=function(e){var t={options:{chart:{toolbar:!1,id:"basic-bar"},xaxis:{categories:[],labels:{show:!1}},yaxis:[{labels:{formatter:function(e){return e.toFixed(0)}},title:{text:"Quantity"}}],dataLabels:{enabled:!1}},series:[{name:"series-1",data:e.data}]};return Object(O.jsxs)(b.a,{className:"card",style:{margin:"2px",height:"100%"},children:[Object(O.jsx)(b.a.Title,{className:"card-header-first",children:"Quantity"}),Object(O.jsx)(b.a.Body,{style:{padding:"0px"},children:Object(O.jsx)(k.a,{options:t.options,series:t.series,type:"bar",width:"100%",height:"100%"})})]})},Qe=function(e){var t=Object(n.useState)([]),r=Object(i.a)(t,2),c=r[0],a=r[1],s=c.map((function(e){return e.pnl})),l=c.map((function(e){return e.quantity})),b=Object(n.useContext)(ke).startDate,h=Object(n.useContext)(ke).endDate;return Object(n.useEffect)((function(){p.a.get(e.server+"robots/trades/",{params:{robot:e.robot,start_date:b,end_date:h}}).then((function(e){return a(e.data)})).catch((function(e){console.error("Error Message:",e)}))}),[e]),Object(O.jsx)(o.a,{fluid:!0,children:Object(O.jsxs)(j.a,{style:{width:"100%",height:"800px",margin:"0px",padding:"0px"},children:[Object(O.jsx)(d.a,{style:{margin:"0px",width:"50%",padding:"0px"},children:Object(O.jsxs)(j.a,{style:{height:"100%",width:"100%",margin:"0px"},children:[Object(O.jsx)(j.a,{style:{height:"50%",width:"100%",padding:"5px",margin:"0px"},children:Object(O.jsx)(qe,{data:s})}),Object(O.jsx)(j.a,{style:{height:"50%",width:"100%",padding:"5px",margin:"0px"},children:Object(O.jsx)(Xe,{data:l})})]})}),Object(O.jsx)(d.a,{style:{margin:"0px",width:"50%",height:"100%",padding:"0px"},children:Object(O.jsx)(j.a,{style:{height:"100%",width:"100%",padding:"5px",margin:"0px"},children:Object(O.jsx)(We,{server:e.server,data:c})})})]})})},Je=function(e){var t=Object(n.useContext)(ke).startDate,r=Object(n.useContext)(ke).endDate,c=Object(n.useState)([]),a=Object(i.a)(c,2),s=a[0],l=a[1];Object(n.useEffect)((function(){p.a.get(e.server+"robots/drawdown/",{params:{robot:e.robot,start_date:t,end_date:r}}).then((function(e){return e.data.map((function(e){return e}))})).then((function(e){return l(e)})).catch((function(e){console.error("Error Message:",e)}))}),[e]);var o={options:{chart:{toolbar:!1,id:"basic-bar"},xaxis:{categories:[],labels:{show:!1}},yaxis:[{labels:{formatter:function(e){return e.toFixed(0)}}}],dataLabels:{enabled:!1}},series:[{name:"Drawdown",data:s}]};return Object(O.jsxs)(b.a,{className:"card",style:{margin:"0px"},children:[Object(O.jsx)(b.a.Title,{className:"card-header-first",children:"Drawdown"}),Object(O.jsx)(b.a.Body,{style:{padding:"0px"},children:Object(O.jsx)(j.a,{style:{height:"100%"},children:Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsx)(k.a,{options:o.options,series:o.series,type:"bar",width:"100%",height:"100%"})})})})]})},Ke=function(e){return Object(O.jsx)(o.a,{fluid:!0,children:Object(O.jsx)(j.a,{style:{width:"100%",height:"100%",margin:"0px"},children:Object(O.jsx)(j.a,{style:{width:"100%",height:"400px",margin:"0px"},children:Object(O.jsx)(Je,{robot:e.robot,server:e.server})})})})},Ze=function(e){var t={options:{chart:{type:"area",toolbar:!1,id:"basic-bar",zoom:{enabled:!1}},xaxis:{categories:[],labels:{show:!1},axisBorder:{show:!1,color:"#78909C",height:1,width:"100%",offsetX:0,offsetY:0},axisTicks:{show:!1,borderType:"solid",color:"#78909C",height:6,offsetX:0,offsetY:0}},yaxis:[{labels:{formatter:function(e){return e.toFixed(0)}}}],dataLabels:{enabled:!1}},stroke:{curve:"straight"},title:{text:"Cumulative Return",align:"left",margin:10,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:"bold",color:"#263238"}},series:[{type:"area",name:"Cumulative Return",data:e.data}]};return Object(O.jsxs)(b.a,{className:"card",style:{margin:"0px"},children:[Object(O.jsx)(b.a.Title,{className:"card-header-first",children:"Cumulative Return"}),Object(O.jsx)(b.a.Body,{style:{padding:"0px"},children:Object(O.jsx)(j.a,{style:{height:"100%",width:"100%",margin:"0px"},children:Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsx)("div",{style:{padding:"0px",height:"100%"},children:Object(O.jsx)(k.a,{options:t.options,series:t.series,type:"area",width:"100%",height:"100%"})})})})})]})},$e=function(e){var t=Object(n.useState)([]),r=Object(i.a)(t,2),c=r[0],a=r[1];return Object(n.useEffect)((function(){p.a.get(e.server+"robots/cumulative_ret/",{params:{robot:e.robot,start_date:e.start_date,end_date:e.end_date}}).then((function(e){return e.data.map((function(e){return e}))})).then((function(e){return a(e)})).catch((function(e){console.error("Error Message:",e)}))}),[e]),Object(O.jsx)(Ze,{data:c})},et=function(e){var t=Object(n.useState)([]),r=Object(i.a)(t,2),c=r[0],a=r[1],s=c.map((function(e){return Math.round(1e4*e.ret)/100}));Object(n.useEffect)((function(){p.a.get(e.server+"robots/get_balance/",{params:{robot:e.robot,start_date:e.start_date,end_date:e.end_date}}).then((function(e){return e.data.map((function(e){return e}))})).then((function(e){return a(e)})).catch((function(e){console.error("Error Message:",e)}))}),[e]);var l={options:{chart:{toolbar:!1,id:"basic-bar"},colors:[function(e){return e.value<0?"#E32227":"#007500"}],xaxis:{categories:[],labels:{show:!1}},yaxis:[{tickAmount:10,labels:{formatter:function(e){return e.toFixed(0)}}}],dataLabels:{enabled:!1,textAnchor:"middle",style:{fontSize:"14px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:"bold",colors:void 0}}},series:[{name:"Daily Retur",data:s}]};return Object(O.jsxs)(b.a,{className:"card",style:{margin:"0px"},children:[Object(O.jsx)(b.a.Title,{className:"card-header-first",children:"Daily Returns"}),Object(O.jsx)(b.a.Body,{style:{padding:"0px"},children:Object(O.jsx)(j.a,{style:{height:"100%",width:"100%",margin:"0px"},children:Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsx)(k.a,{options:l.options,series:l.series,type:"bar",width:"100%",height:"100%"})})})})]})},tt=function(e){var t=Object(n.useState)([]),r=Object(i.a)(t,2),c=r[0],a=r[1];Object(n.useEffect)((function(){p.a.get(e.server+"robots/monthly_returns_calc/",{params:{robot:e.robot,year:"2022"}}).then((function(e){return a(e.data)})).catch((function(e){console.error("Error Message:",e)}))}),[e]);var s={options:{chart:{toolbar:!1,id:"basic-bar"},colors:[function(e){return e.value<0?"#E32227":"#007500"}],xaxis:{},yaxis:[{labels:{formatter:function(e){return e.toFixed(0)}}}],dataLabels:{enabled:!1}},series:[{name:"Monthly Return",data:c}]};return Object(O.jsxs)(b.a,{className:"card",style:{margin:"0px"},children:[Object(O.jsx)(b.a.Title,{className:"card-header-first",children:"Monthly Returns"}),Object(O.jsx)(b.a.Body,{style:{padding:"0px"},children:Object(O.jsx)(j.a,{style:{height:"100%",width:"100%",margin:"0px"},children:Object(O.jsx)(d.a,{style:{height:"100%"},children:Object(O.jsx)(k.a,{options:s.options,series:s.series,type:"bar",width:"100%",height:"100%"})})})})]})},rt=function(e){var t=Object(n.useContext)(ke).startDate,r=Object(n.useContext)(ke).endDate;return Object(O.jsx)(o.a,{fluid:!0,children:Object(O.jsxs)(j.a,{style:{width:"100%",height:"100%",margin:"0px"},children:[Object(O.jsxs)(d.a,{style:{width:"50%",height:"100%"},children:[Object(O.jsx)(j.a,{style:{height:"60%",padding:"4px"},children:Object(O.jsx)($e,{robot:e.robot,start_date:t,end_date:r,server:e.server})}),Object(O.jsx)(j.a,{style:{height:"40%",padding:"4px"},children:Object(O.jsx)(et,{robot:e.robot,start_date:t,end_date:r,server:e.server})})]}),Object(O.jsx)(d.a,{children:Object(O.jsx)(j.a,{style:{height:"40%",padding:"4px"},children:Object(O.jsx)(tt,{robot:e.robot,start_date:t,end_date:r,server:e.server})})})]})})},nt=function(e){var t=Object(n.useState)(),r=Object(i.a)(t,2),c=r[0],a=r[1],s=Object(n.useState)(),l=Object(i.a)(s,2),o=l[0],j=l[1],d=Object(n.useState)(),b=Object(i.a)(d,2),h=b[0],u=b[1],g=Object(n.useState)(),m=Object(i.a)(g,2),v=m[0],y=m[1],S=Object(n.useState)(),w=Object(i.a)(S,2),C=w[0],_=w[1],A=Object(n.useState)(),k=Object(i.a)(A,2),N=k[0],E=k[1],z=Object(n.useState)(),D=Object(i.a)(z,2),L=D[0],M=D[1];Object(n.useEffect)((function(){fetch(e.server+"risk/get_risk/"+e.robot).then((function(e){return e.json()})).then((function(e){a(e.daily_risk_perc),j(e.daily_trade_limit),u(e.risk_per_trade),y(e.quantity_type),_(e.quantity),E(e.sl),M(e.win_exp)})).catch((function(e){console.error("Error Message:",e)}))}),[e]);return Object(O.jsx)(T,{title:"Risk Settings",children:Object(O.jsxs)(x.a,{children:[Object(O.jsxs)(x.a.Group,{className:"mb-3",controlId:"daily_risk_perc",children:[Object(O.jsx)(x.a.Label,{children:"Daily Loss Limit"}),Object(O.jsx)(x.a.Control,{onChange:function(e){return a(e.target.value)},type:"number",value:c,min:0,max:1,step:.01})]}),Object(O.jsxs)(x.a.Group,{className:"mb-3",controlId:"daily_trade_limit",children:[Object(O.jsx)(x.a.Label,{children:"Max Number of Trades per Day"}),Object(O.jsx)(x.a.Control,{onChange:function(e){return j(e.target.value)},type:"number",value:o,min:0})]}),Object(O.jsxs)(x.a.Group,{className:"mb-3",controlId:"risk_per_trade",children:[Object(O.jsx)(x.a.Label,{children:"Risk Exposure per Trade"}),Object(O.jsx)(x.a.Control,{onChange:function(e){return u(e.target.value)},type:"number",value:h,min:0,step:.005})]}),Object(O.jsxs)(x.a.Group,{className:"mb-3",controlId:"quantity_type",children:[Object(O.jsx)(x.a.Label,{children:"Quantity Type"}),Object(O.jsxs)(x.a.Control,{onChange:function(e){return y(e.target.value)},value:v,as:"select",children:[Object(O.jsx)("option",{value:"Stop Based",children:"Stop Based"}),Object(O.jsx)("option",{value:"Fix",children:"Fix"})]})]}),Object(O.jsxs)(x.a.Group,{className:"mb-3",controlId:"quantity",children:[Object(O.jsx)(x.a.Label,{children:"Quantity"}),Object(O.jsx)(x.a.Control,{onChange:function(e){return _(e.target.value)},type:"number",placeholder:C,min:0})]}),Object(O.jsxs)(x.a.Group,{className:"mb-3",controlId:"sl",children:[Object(O.jsx)(x.a.Label,{children:"Stop Loss"}),Object(O.jsx)(x.a.Control,{onChange:function(e){return E(e.target.value)},type:"number",placeholder:N,min:0})]}),Object(O.jsxs)(x.a.Group,{className:"mb-3",controlId:"win_exp",children:[Object(O.jsx)(x.a.Label,{children:"Winning Exposure per Trade"}),Object(O.jsx)(x.a.Control,{onChange:function(e){return M(e.target.value)},type:"number",placeholder:L,min:0})]}),Object(O.jsx)(f.a,{onClick:function(t){t.preventDefault(),p.a.post(e.server+"risk/update_robot_risk/",{robot:e.robot,daily_risk:c,nbm_trades:o,risk_per_trade:h,pyramiding_level:1,quantity_type:v,quantity:C,sl:N,win_exp:L}).then((function(t){return alert("Risk is updated for "+e.robot)})).catch((function(e){console.error("Error Message:",e)}))},variant:"primary",type:"submit",children:"Save"})]})})},ct=function(e){var t=Object(n.useState)(),r=Object(i.a)(t,2),c=r[0],a=r[1];return Object(O.jsx)(T,{title:"Settings",style:{margin:"5px"},children:Object(O.jsxs)(x.a,{children:[Object(O.jsxs)(x.a.Group,{className:"mb-3",controlId:"quantity_type",children:[Object(O.jsx)(x.a.Label,{children:"Status"}),Object(O.jsxs)(x.a.Control,{onChange:function(e){return a(e.target.value)},defaultValue:"active",as:"select",children:[Object(O.jsx)("option",{value:"active",children:"Active"}),Object(O.jsx)("option",{value:"inactive",children:"Inactive"})]})]}),Object(O.jsx)(f.a,{onClick:function(t){t.preventDefault(),p.a.post(e.server+"robots/update_status/",{robot:e.robot,status:c}).then((function(t){return alert("Risk is updated for "+e.robot)})).catch((function(e){console.error("Error Message:",e)}))},variant:"primary",type:"submit",children:"Save"})]})})},at=function(e){return Object(O.jsxs)(j.a,{style:{height:"100%",width:"100%",margin:"0px"},children:[Object(O.jsx)(d.a,{children:Object(O.jsx)(nt,{robot:e.robot,server:e.server})}),Object(O.jsx)(d.a,{children:Object(O.jsx)(ct,{robot:e.robot,server:e.server})})]})},st=r(138),it=function(e){var t=Object(n.useContext)(S).server,r=Object(n.useContext)(u).environment,c=Object(n.useContext)(N).robots,a=Object(n.useState)(c[0].name),s=Object(i.a)(a,2),b=s[0],h=s[1],x=Object(n.useState)(!1),f=Object(i.a)(x,2),g=f[0],p=f[1],m=Object(n.useState)(!1),v=Object(i.a)(m,2),y=v[0],w=v[1],C=Object(n.useState)(!1),_=Object(i.a)(C,2),A=_[0],k=_[1];return Object(O.jsxs)(o.a,{style:{background:"#FBFAFA",width:"100%",height:window.innerHeight,padding:"0px"},fluid:!0,children:[Object(O.jsxs)(j.a,{style:{height:"100%",margin:"0px"},children:[Object(O.jsx)(Y.c,{children:Object(O.jsxs)(Y.a,{iconShape:"square",children:[Object(O.jsx)(Y.d,{title:"Robot",icon:Object(O.jsx)(_e.d,{size:20,className:"rounded-circle"}),children:Object(O.jsx)(Y.b,{style:{padding:"5px"},children:Object(O.jsx)(Le,{robots:c,server:t,env:r,robotChange:function(e){h(e)}})})}),Object(O.jsx)(Y.b,{onClick:function(){p(!0)},icon:Object(O.jsx)(_e.i,{size:20,className:"rounded-circle"}),children:"New Robot"}),Object(O.jsxs)(Y.b,{icon:Object(O.jsx)(st.a,{size:20}),children:["Dashboard",Object(O.jsx)(H.b,{to:"/robot/dashboard"})]}),Object(O.jsx)(Y.d,{title:"Trade",icon:Object(O.jsx)(_e.e,{size:20}),children:Object(O.jsx)(Y.b,{children:"Robot"})}),Object(O.jsxs)(Y.d,{title:"Calculations",icon:Object(O.jsx)(_e.c,{size:20,className:"rounded-circle"}),children:[Object(O.jsx)(Y.b,{onClick:function(){w(!0)},children:"Balance"}),Object(O.jsx)(Y.b,{onClick:function(){k(!0)},children:"Pricing"})]}),Object(O.jsxs)(Y.b,{icon:Object(O.jsx)(_e.l,{size:20,className:"rounded-circle"}),children:["Transactions",Object(O.jsx)(H.b,{to:"/robot/transactions"})]}),Object(O.jsxs)(Y.b,{icon:Object(O.jsx)(_e.g,{size:20}),children:["Risk",Object(O.jsx)(H.b,{to:"/robot/risk"})]}),Object(O.jsxs)(Y.b,{icon:Object(O.jsx)(_e.a,{size:20}),children:["Return",Object(O.jsx)(H.b,{to:"/robot/return"})]}),Object(O.jsxs)(Y.b,{icon:Object(O.jsx)(_e.j,{size:20}),children:["Settings",Object(O.jsx)(H.b,{to:"/robot/settings"})]})]})}),Object(O.jsx)(d.a,{style:{width:"50%"},children:Object(O.jsx)(j.a,{style:{padding:"15px",height:window.innerHeight,width:"100%",margin:"0px"},children:Object(O.jsxs)(l.c,{children:[Object(O.jsx)(l.a,{path:"/robot/dashboard",children:Object(O.jsx)(He,{server:t,robot:b,default:c[0]})}),Object(O.jsx)(l.a,{path:"/robot/transactions",children:Object(O.jsx)(Qe,{robot:b,server:t})}),Object(O.jsx)(l.a,{path:"/robot/risk",children:Object(O.jsx)(Ke,{robot:b,server:t})}),Object(O.jsx)(l.a,{path:"/robot/return",children:Object(O.jsx)(rt,{robot:b,server:t})}),Object(O.jsx)(l.a,{path:"/robot/settings",children:Object(O.jsx)(at,{robot:b,server:t})})]})})})]}),Object(O.jsx)(ze,{show:g,hide:function(){p(!1)},server:t,style:{height:"400px"}}),Object(O.jsx)(De,{show:y,hide:function(){w(!1)},server:t,robot:b}),Object(O.jsx)(Te,{show:A,hide:function(){k(!1)},server:t,robot:b})]})},lt=function(){return Object(O.jsx)("div",{children:Object(O.jsx)("h2",{children:"Instrument Page"})})};r(198);var ot=function(){var e=Object(n.useState)("live"),t=Object(i.a)(e,2),r=t[0],c=t[1],a=Object(n.useState)([]),s=Object(i.a)(a,2),o=s[0],j=s[1],d=Object(n.useState)([]),b=Object(i.a)(d,2),h=b[0],x=b[1],f="https://pavliati.pythonanywhere.com/",g=new Date,m=new Date(g.getFullYear(),g.getMonth(),1),v=Object(n.useState)(m.toISOString().substr(0,10)),y=Object(i.a)(v,2),C=y[0],_=y[1],A=Object(n.useState)(g.toISOString().substr(0,10)),k=Object(i.a)(A,2),E=k[0],z=k[1];return console.log(C),Object(n.useEffect)((function(){p.a.get(f+"portfolios/get_portfolio_data/all").then((function(e){return j(e.data)})).catch((function(e){console.error("Error Message:",e)}))}),[]),Object(n.useEffect)((function(){p.a.get(f+"robots/get_robots/"+r).then((function(e){return x(e.data)})).catch((function(e){console.error("Error Message:",e)}))}),[]),Object(O.jsx)(S.Provider,{value:{server:f},children:Object(O.jsx)(u.Provider,{value:{environment:r},children:Object(O.jsx)(N.Provider,{value:{robots:h},children:Object(O.jsx)(ne.Provider,{value:{portfolioData:o},children:Object(O.jsxs)(ke.Provider,{value:{startDate:C,endDate:E,saveStartDate:_,saveEndDate:z},children:[Object(O.jsx)(Ce.a,{}),Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)(Ee,{onEnvChange:function(e){c(e)},env:r}),Object(O.jsxs)(l.c,{children:[Object(O.jsx)(l.a,{path:"/risk",children:Object(O.jsx)(w,{})}),Object(O.jsx)(l.a,{path:"/home",children:Object(O.jsx)(G,{})}),Object(O.jsx)(l.a,{path:"/trade",children:Object(O.jsx)(ge,{})}),Object(O.jsx)(l.a,{path:"/portfolio",children:Object(O.jsx)(ue,{})}),Object(O.jsx)(l.a,{path:"/instruments",children:Object(O.jsx)(lt,{})}),Object(O.jsx)(l.a,{path:"/robot",children:Object(O.jsx)(it,{})})]})]})]})})})})})},jt=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,223)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;r(e),n(e),c(e),a(e),s(e)}))};s.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(H.a,{children:Object(O.jsx)(ot,{})})}),document.getElementById("root")),jt()},36:function(e,t,r){}},[[199,1,2]]]);
//# sourceMappingURL=main.82df5bf9.chunk.js.map