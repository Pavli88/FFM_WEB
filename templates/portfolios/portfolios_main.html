<!DOCTYPE html>
{% extends "base.html" %}

{% block head %}

{% endblock %}

{% block main_block%}
<br>
<div style="width: 100%; height: 50px; background: #5b80b2">
    <h1>Portfolio Management</h1>
</div>

<div style="width: 100%; height: 50px; background: #ba2121; display: flex">
   <div class="form-group">
        <label>Portfolio</label>
        <select class="form-control-sm" name="port_name" id="port_selector" required>
            {% for portfolio in portfolios %}
            <option>{{portfolio.portfolio_name}}</option>
            {% endfor %}
        </select>
    </div>

    <div>
        <label>NAV</label>
        <label id="nav_value">1000</label>
        <label>$</label>
    </div>

    <div>
        <label>Available Cash</label>
        <label id="available_cash">500</label>
        <label>$</label>
    </div>
</div>

<div style="width: 100%; height: 200px; background: #5b80b2">
    <h1>Process Management</h1>
    <div class="form-group">
        <label>Process</label>
        <select name="process" id="process" required>
            <option>Positions</option>
            <option>NAV Calculation</option>
            <option>Portfolio Risk</option>
            <option>Portfolio Holdings</option>
            <option>Portfolio Return</option>
        </select>
        <label for="start">Start date:</label>
        <input type="date" id="start" name="trip-start" value="2018-07-22">
        <button style="width: 100px; height: 50px;" id="calc_btn">Calculate</button>
    </div>

</div>

<div style="width: 100%; height: 500px; background: #49B0C2" id="trade_panel">

    <h1>Trade</h1>

    <div class="form-group">
        <label>Security Type</label>
        <select class="form-control form-control-sm" name="sec_type" id="sec_select" required>
            <option>Robot</option>
            <option>Equity</option>
            <option>Commodity</option>
            <option>Bond</option>
            <option>Currency</option>
        </select>
    </div>

    <div class="form-group">
        <label>Security</label>
        <select class="form-control form-control-sm" name="security" id="secs" required>
            <option class="securities">Robot</option>
            <option class="securities">Investment</option>
        </select>
    </div>

    <div class="form-group">
        <label>Quantity</label>
        <input type="number" class="form-control form-control-sm" step="10.0" name="qty" id="qty" required>
    </div>

    <div class="form-group">
        <label>Price</label>
        <input type="number" class="form-control form-control-sm" min="0.0", step="10.0" name="price" id="price" required>
    </div>

    <div class="form-group" style="display: flex">
        <label>Market Value:</label>
        <label id="mv">1230</label>
    </div>

    <button style="width: 100px; height: 50px;" id="trade_btn">Trade</button>
</div>

<div style="width: 100%; height: 400px; background: #B5A22A">
    <div style="width: 100%; height: 50px; background: #ba2121">
        <button class="btn btn-primary submit_button" id="get_chart">Get Chart</button>
    </div>
    <div style="width: 100%; height: 100%; background: #49B0C2; display: flex" >
        <div style="width: 50%; height: 100%; background: #447e9b" >

        </div>
        <div style="width: 50%; height: 100%; background: #666666">
            <canvas style="width: 100%; height: 100%;" id="pie_chart"></canvas>
        </div>
    </div>
</div>
<div id="d_table"></div>

{% load static %}
<script src="{% static 'admin/js/portfolios_main.js' %}"></script>

{% endblock %}

<!--New portfolio creator form-->
{% block entry_form %}

<br>
<form class="entry_form" action="{% url 'create portfolio' %}" method="POST">

    {% csrf_token %}
    <h4>New Portfolio</h4>
    <div class="form-group">
        <input id="robot_name" class="form-control form-control-sm" type="text" name="port_name"
               placeholder="Portfolio Name" required>
    </div>
    <div class="form-group">
        <label>Portfolio Type</label>
        <select class="form-control form-control-sm" name="port_type" required>
            <option>Trade</option>
            <option>Investment</option>
        </select>
    </div>
    <input class="btn btn-primary submit_button" type="submit" , name="button" value="Create"><br>
</form>

<br>
<form class="entry_form" action="{% url 'create port cash flow' %}" method="POST">

    {% csrf_token %}
    <h4>New Cash FLow</h4>

    <div class="form-group">
        <label>Portfolio</label>
        <select class="form-control form-control-sm" name="port_name" required>
            {% for portfolio in portfolios %}
            <option>{{portfolio.portfolio_name}}</option>
            {% endfor %}
        </select>
    </div>
    <div class="form-group">
        <label>Type</label>
        <select class="form-control form-control-sm" name="type" required>
            <option>INFLOW</option>
            <option>OUTFLOW</option>
        </select>
    </div>
    <div class="form-group">
        <input type="number" class="form-control form-control-sm" min="0.0" step="10.0" name="amount" required>
    </div>
    <input class="btn btn-primary submit_button" type="submit" , name="button" value="Add"><br>
</form>

<br>
<form class="entry_form" action="{% url 'create instrument' %}" method="POST">

    {% csrf_token %}
    <h4>New Instrument</h4>
    <div class="form-group">
        <input type="text" class="form-control form-control-sm" name="instrument_name" required>
    </div>
    <div class="form-group">
        <label>Instrument Type</label>
        <select class="form-control form-control-sm" name="instrument_type" required>
            <option>Equity</option>
            <option>Commodity</option>
            <option>Currency</option>
            <option>Bond</option>
        </select>
    </div>
    <div class="form-group">
        <label>Source</label>
        <select class="form-control form-control-sm" name="source" required>
            <option>oanda</option>
            <option>MAP</option>
        </select>
    </div>
    <input class="btn btn-primary submit_button" type="submit" name="button" value="Add"><br>
</form>

{% endblock %}


