<!DOCTYPE html>
{% extends "base.html" %}

{% block head %}
{% load static %}
<link href="{% static 'admin/css/robots_template.css' %}" rel="stylesheet">

{% endblock %}

<!--New robot creator form-->
{% block entry_form %}
<form class="entry_form" action="{% url 'create robot' %}" method="POST">
    {% csrf_token %}
    <h4>New Robot</h4>
    <div class="form-group">
        <input id="robot_name" class="form-control form-control-sm" type="text" name="robot_name"
                   placeholder="Robot Name" required>
    </div>
    <div class="form-group">
        <input id="strategy_name" class="form-control form-control-sm" type="text" name="strategy_name" placeholder="Strategy" required>
    </div>
    <div class="form-group">
        <input id="security" class="form-control form-control-sm" type="text" name="security" placeholder="Security" required>
    </div>
    <div class="form-group">
        <input id="time_frame" class="form-control form-control-sm" type="text" name="time_frame" placeholder="Timeframe" required>
    </div>
    <div class="form-group">
        <input class="form-control form-control-sm" type="text" name="broker"
               placeholder="Broker" required>
    </div>
    <div class="form-group">
        <input class="form-control form-control-sm" type="text" name="account_number"
               placeholder="Account Number" required>
    </div>
    <div class="form-group">
        <label for="quantity">Quantity</label>
        <input class="form-control form-control-sm" type="number" id="quantity" name="quantity" min="0" value="0" required>
    </div>
    <div class="form-group">
        <label for="prec">SL Precision</label>
        <input class="form-control form-control-sm" type="number" id="prec" name="precision" min="1" value="1" required>
    </div>
    <div class="form-group">
        <label for="pyramiding_level">Pyramiding Level</label>
        <input class="form-control form-control-sm" type="number" id="pyramiding_level" name="pyramiding_level" min="0" max="10" value="0" required>
    </div>
    <div class="form-group">
        <label for="init_exp">Initial Exposure Level</label>
        <input class="form-control form-control-sm" type="number" id="init_exp" name="init_exp" min="0.00" step="0.01" value="0.00" required>
    </div>

    <div class="form-group">
        <label for="sl_policy">Stop Loss Policy</label>
        <select class="form-control form-control-sm" id="sl_policy" name="sl_policy" required>
            <option value="percentage">percentage</option>
            <option value="level">level</option>
        </select>
    </div>

    <div class="form-group">
        <label>Status</label><br>
        <label class="normal_text" for="active">Active</label>
        <input type="radio" id="active" name="status" value="active" required>
        <label class="normal_text" for="inactive">Inactive</label>
        <input type="radio" id="inactive" name="status" value="inactive">
    </div>

    <div class="form-group">
        <label class="entry_label_name">Environment</label>
        <div class="form-group">
            <label class="normal_text" for="live_env">Live</label>
            <input type="radio" id="live_env" name="env" value="live" required>
            <label class="normal_text" for="demo_env">Demo</label>
            <input type="radio" id="demo_env" name="env" value="demo">
        </div>
    </div>

    <script>if ("{{ exist_robots }}" == "exists") {
                        alert("Record already exists in database!");
                    }else if ("{{ exist_robots }}" == "created") { alert("New record was created!")}
    </script>
    <input class="btn btn-primary submit_button" type="submit", name="button" value="Add New Robot"><br>
</form>
{% endblock %}

<!--Main block-->
{% block main_block%}

<!--Robot Processes-->
<br>
<div class="card h-md-100 shadow bg-white rounded" style="width: 100%; height: 300px; display: flex">
    <div class="card-header" style="display: flex">
        <h5 style="color: #19393D; padding: 5px"><strong>Process Management</strong></h5>
        <div class="col-auto" style="padding: 5px">
            <select class="form-control" name="port_name" id="robot_proc_selector" required>
                <option>Balance</option>
                <option>Risk</option>
            </select>
        </div>
        <div class="col-auto" style="padding: 5px">
            <select class="form-control" name="port_name" id="robot" required>
                {% for robot in robots %}
                <option>{{ robot.name}}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group" style="padding: 5px">
            <input class="form-control" type="date" id="start" name="trip-start" value="2020-10-14">
        </div>
        <div class="form-group" style="padding: 5px">
            <button type="button" class="btn btn-outline-dark" id="calc_btn">
                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-right" fill="currentColor"
                     xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd"
                          d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
                </svg>
            </button>
        </div>
    </div>
    <div class="card_container form-row align-items-center ">

    </div>
</div>

<!--Test trade panel-->
<br>
<div class="card h-md-100 shadow bg-white rounded" style="width: 100%; height: 300px; display: flex">
    <div class="card-header" >
        <div style="display: flex">
            <div style="padding: 5px">
                <h5 class="card-title" style="color: #19393D"><strong>Robots</strong></h5>
            </div>
            <div style="padding: 5px">
                <button type="button" class="btn btn-outline-dark" id="load_robots">
                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-clockwise"
                         fill="currentColor"
                         xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                        <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
                    </svg>
                </button>
            </div>
            <div style="padding: 5px">
                <button type="button" class="btn btn-outline-dark" id="new_robot">
                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-plus" fill="currentColor"
                         xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd"
                              d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>
    <div class="card_container" style="width: 100%; overflow-y:scroll;">
        <table class="table-striped" style="width: 100%" id="robot_table">
            <thead style="width: 100%">
            <tr>
                <th scope="col">Name</th>
                <th scope="col">Strategy</th>
                <th scope="col">Security</th>
                <th scope="col">Time Frame</th>
                <th scope="col">Broker</th>
                <th scope="col">Env</th>
                <th scope="col">Status</th>
                <th scope="col">Account Number</th>
                <th scope="col"></th>
                <th scope="col"></th>
            </tr>
            </thead>
            <tbody id="robot_table_body"></tbody>
        </table>
    </div>
</div>

<!--Test trade panel-->
<br>
<div class="card h-md-100 shadow bg-white rounded" style="width: 100%; height: 150px; display: flex">
    <div class="card-header" style="display: flex">
        <h5 style="color: #19393D"><strong>Trade</strong></h5>


        <div class="form-group">
            <button class="btn btn-primary" style="width: 100px; height: 30px;" id="trade_btn">Trade</button>
        </div>

        <div class="form-group">
            <button class="btn btn-primary" style="width: 100px; height: 30px;" id="close_btn">Close</button>
        </div>

    </div>

    <div class="card_container form-row align-items-center ">

    </div>
</div>

<div class="card h-md-100 shadow bg-white rounded" style="width: 300px" id="new_robot_dialog">
    <div class="card-body">
        <h5 class="card-title">New Robot</h5>
        {{ robot_form.as_p }}
        <button type="submit" class="btn btn-outline-dark" style="width: 100px; height: 30px;" id="create_robot_btn">Add</button>
    </div>
</div>

{% load static %}
<script src="{% static 'admin/js/robots_main.js' %}"></script>
{% endblock %}




