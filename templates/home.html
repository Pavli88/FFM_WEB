<!DOCTYPE html>
{% extends "base.html" %}

{% block head %}
{% load static %}
<link href="{% static 'admin/css/home_template.css' %}" rel="stylesheet">
{% endblock %}

{% block my_scripts %}

{% endblock %}
{% block entry_form %}
<br>
<div class="card" style="width: 100%; height: 400px; display: flex">
    <div class="card-header" style="display: flex">
        <div style="padding: 5px">
            <label style="color: #19393D; margin: 0px"><strong>Robot Performance Dashboard</strong></label>
        </div>
        <div style="position: absolute; right: 40px">
            <ul class="navbar-nav">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" data-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false">
                        Environment
                    </a>
                    <div class="dropdown-menu"
                         style="position: absolute; left: 0px">
                        <label class="dropdown-item" id="liveRobots">Live</label>
                        <label class="dropdown-item" id="demoRobots">Demo</label>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <div style="width: 100%; height: 100%; overflow-y:scroll;">
        <table style="width: 100%">
            <thead style="width: 100%">
            <tr>
                <th>Robot</th>
                <th>Security</th>
                <th>Env</th>
                <th>Balance</th>
                <th>DTD</th>
                <th>MTD</th>
                <th>YTD</th>
            </tr>
            </thead>
            <tbody id="robotStatTable"></tbody>
        </table>
    </div>
    <div class="card-footer text-muted">
        <label style="color: #19393D; margin: 0px"><strong>Year to Date Profit:</strong></label>
        <label style="color: #19393D; margin: 0px" id="ytdProfit"><strong>450</strong></label>
    </div>
</div>

<br>
<div class="card" style="width: 100%; height: 400px; display: flex">
    <div class="card-header" style="display: flex">
        <div style="padding: 5px">
            <label style="color: #19393D; margin: 0px"><strong>Account Performance Dashboard</strong></label>
        </div>
        <div style="position: absolute; right: 40px">
            <ul class="navbar-nav">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" data-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false">
                        Environment
                    </a>
                    <div class="dropdown-menu"
                         style="position: absolute; left: 0px">
                        <label class="dropdown-item" id="liveAccounts">Live</label>
                        <label class="dropdown-item" id="demoAccounts">Demo</label>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <div style="width: 100%; height: 100%; overflow-y:scroll; overflow-x:scroll">
        <table style="width: 100%">
            <thead style="width: 100%">
            <tr>
                <th>Broker</th>
                <th>Account</th>
                <th>Env</th>
                <th>Balance</th>
                <th>DTD</th>
                <th>MTD</th>
                <th>YTD</th>
            </tr>
            </thead>
            <tbody id="accountStatTable"></tbody>
        </table>
    </div>
</div>

{% load static %}
<script src="{% static 'admin/js/home_page_right_panel.js' %}"></script>
{% endblock %}

{% block main_block%}
<br>
<div style="height: 500px; width: 100%; overflow-y:scroll">
    <!--Portfolios-->
    <div class="card" style="width: 100%; height: 500px; display: flex">
        <div class="card-header" style="display: flex">
            <div style="padding: 5px">
                <label style="color: #19393D; margin: 0px"><strong>Robots</strong></label>
            </div>
            <div style="padding: 5px;">
                <select class="form-control form-control-sm" name="robot_name" id="robotSelector">
                    {% for robot in robots %}
                    <option>{{robot.name}}</option>
                    {% endfor %}
                </select>
            </div>
            <div style="position: absolute; right: 40px; display: flex; padding: 5px;">
                <label>Start Date</label>
                <div class="form-group" style="padding-right: 5px;">
                    <input class="form-control form-control-sm startDay" type="date" id="startDate" name="start_date"
                           min="2020-01-01" style="width: 150px">
                </div>
                <label>End Date</label>
                <div class="form-group" style="padding-right: 5px;">
                    <input class="form-control form-control-sm endDay" type="date" id="endDate" name="end_date"
                           min="2020-01-01" style="width: 150px">
                </div>
            </div>
        </div>
        <div style="width: 100%; height: 100%; display: flex; padding: 10px;">

            <!--General info performance and risk numbers-->
            <div class="card" style="width: 30%; height: 100%; display: flex">
                <div class="card-header" style="display: flex; height: 50px; padding-top: 0px;padding-bottom: 0px">
                    <div style="padding: 5px">
                        <label style="color: #19393D; margin: 0px"><strong>Info</strong></label>
                    </div>
                    <div>
                        <ul class="nav nav-tabs" id="infoTab">
                            <li class="nav-item">
                                <a href="#riskInfo" class="nav-link" data-toggle="tab">Risk</a>
                            </li>
                            <li class="nav-item">
                                <a href="#returnInfo" class="nav-link" data-toggle="tab">Return</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div style="width: 100%; height: 100%;">

                </div>
            </div>

            <!--Charts-->
            <div class="card" style="width: 70%; height: 100%; display: flex">
                <div class="card-header" style="display: flex; height: 50px; padding-top: 0px;padding-bottom: 0px">
                    <div style="padding: 5px;">
                        <label style="color: #19393D; margin: 0px;"><strong>Charts</strong></label>
                    </div>
                    <div>
                        <ul class="nav nav-tabs" id="chartTab">
                            <li class="nav-item">
                                <a href="#dailyRet" class="nav-link" data-toggle="tab">Daily Returns</a>
                            </li>
                            <li class="nav-item">
                                <a href="#robotBalance" class="nav-link" data-toggle="tab">Balance</a>
                            </li>
                            <li class="nav-item">
                                <a href="#robotCf" class="nav-link" data-toggle="tab">Cash Flow</a>
                            </li>
                            <li class="nav-item">
                                <a href="#robotTrades" class="nav-link" data-toggle="tab">Trades</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="bs-example" style="width: 100%; height: 100%">
                    <div class="tab-content">
                        <div class="tab-pane fade" id="dailyRet">
                            <canvas id="dailyReturnChart" width="400" height="170"></canvas>
                        </div>
                        <div class="tab-pane fade" id="robotBalance">
                            <canvas id="balanceChart" width="400" height="170"></canvas>
                        </div>
                        <div class="tab-pane fade" id="robotCf">
                            <canvas id="cashFlowChart" width="400" height="170"></canvas>
                        </div>
                        <div class="tab-pane fade" id="robotTrades">
                            <canvas id="tradesChart" width="400" height="170"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--Account-->
    <br>
    <div style="width: 100%;">
        <div class="card" style="width: 100%; height: 200px; display: flex">
            <div class="card-header card_header">
                <div style="padding: 5px">
                    <h5 style="color: #19393D"><strong>Account</strong></h5>
                </div>
                <div style="padding: 5px">
                    <select class="form-control form-control-sm" name="account" id="account_selector">
                        {% for account in accounts %}
                        <option>{{account.account_number}}</option>
                        {% endfor %}
                    </select>
                </div>
                <div>
                    <label><strong>Environment</strong></label>
                </div>
                <div>
                    <label id="#env"></label>
                </div>
                <div>
                    <label id="broker">Oanda</label>
                </div>
                <div>
                    <label><strong>Asset Value</strong></label>
                </div>
                <div>
                    <label>1346</label>
                </div>
            </div>
            <div class="card_container" style="height: 100%; width: 100%">
                <canvas id="bar_chart_2" width="50%"></canvas>
            </div>
        </div>
    </div>
</div>

<!--System Messages-->
<br>
<div style="width: 100%; height: 300px">
    <div class="card" style="width: 100%; height: 100%; display: flex">
        <div class="card-header" style="display: flex">
            <div style="padding: 5px">
                <label style="color: #19393D; margin: 0px"><strong>System Messages</strong></label>
            </div>
            <div style="position: absolute; right: 40px">
                <ul class="navbar-nav">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" data-toggle="dropdown"
                           aria-haspopup="true" aria-expanded="false">
                            Options
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink"
                             style="position: absolute; left: 0px">
                            <label class="dropdown-item" id="loadMsgsBtn">Refresh</label>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        <div class="card_container" style="width: 100%; overflow-y:scroll;">
            <table class="table-striped" style="width: 100%" id="msgTable">
                <thead style="width: 100%">
                <tr>
                    <th scope="col">Type</th>
                    <th scope="col">Message</th>
                    <th scope="col">Date</th>
                </tr>
                </thead>
                <tbody id="msgTableBody"></tbody>
            </table>
        </div>
    </div>
</div>

{% load static %}
<script src="{% static 'admin/js/home_page.js' %}"></script>
{% endblock %}



